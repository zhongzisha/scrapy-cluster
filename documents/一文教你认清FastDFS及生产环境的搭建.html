<!doctype html>
<html data-n-head-ssr>
  <head >
    <title>一文教你认清FastDFS及生产环境的搭建</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="google-site-verification" content="cCHsgG9ktuCTgWgYfqCJql8AeR4gAne4DTZqztPoirE"><meta data-n-head="ssr" name="google-site-verification" content="nPvn9R5NJLsZKTv5VKIbn0OmkRcJ4PC6KdDoTX3n5Mw"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="baidu-site-verification" content="qiK2a1kcFc"><meta data-n-head="ssr" name="360-site-verification" content="4c3c7d57d59f0e1a308462fbc7fd7e51"><meta data-n-head="ssr" name="sogou_site_verification" content="c49WUDZczQ"><meta data-n-head="ssr" name="msapplication-config" content="https://b-gold-cdn.xitu.io/favicons/v2/browserconfig.xml"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="掘金,稀土,Vue.js,微信小程序,Kotlin,RxJava,React Native,Wireshark,敏捷开发,Bootstrap,OKHttp,正则表达式,WebGL,Webpack,Docker,MVVM"><meta data-n-head="ssr" vmid="description" name="description" content="掘金是一个帮助开发者成长的社区，是给开发者用的 Hacker News，给设计师用的 Designer News，和给产品经理用的 Medium。掘金的技术文章由稀土上聚集的技术大牛和极客共同编辑为你筛选出最优质的干货，其中包括：Android、iOS、前端、后端等方面的内容。用户每天都可以在这里找到技术世界的头条内容。与此同时，掘金内还有沸点、掘金翻译计划、线下活动、专栏文章等内容。即使你是 GitHub、StackOverflow、开源中国的用户，我们相信你也可以在这里有所收获。"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="分布式"><meta data-n-head="ssr" vmid="description" name="description" content=""><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://b-gold-cdn.xitu.io/favicons/v2/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-16x16.png"><link data-n-head="ssr" rel="manifest" href="https://b-gold-cdn.xitu.io/favicons/v2/manifest.json"><link data-n-head="ssr" rel="mask-icon" color="#5bbad5" href="https://b-gold-cdn.xitu.io/favicons/v2/safari-pinned-tab.svg"><link data-n-head="ssr" rel="shortcut icon" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon.ico"><link data-n-head="ssr" rel="search" title="掘金" href="https://b-gold-cdn.xitu.io/conf/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="https://b-gold-cdn.xitu.io/ionicons/2.0.1/css/ionicons.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://b-gold-cdn.xitu.io/asset/fw-icon/1.0.9/iconfont.css"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/runtime.f3142b8.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/app.3b100c6.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/vendors~app.204899d.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/app.88bad42.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/layouts/default.0d655de.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/layouts.default.1c3d5fa.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/17.ec4a0fa.js" as="script"><link rel="preload" href="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/.d009df7.js" as="script"><style data-vue-ssr-id="6d4e8b07:0 580fe052:0 19f03031:0 5c3d9f7f:0 bc0d363a:0 00da2bb5:0 0094bb9d:0 69c38404:0 10d680ba:0 291dc925:0 0df5c402:0 6d1bad94:0 451eb286:0 c277c556:0 7192d33a:0">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}@font-face{font-family:iconfont;src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358);src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358#iefix) format("embedded-opentype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.woff?t=1470110358) format("woff"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.ttf?t=1470110358) format("truetype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.svg?t=1470110358#iconfont) format("svg")}.iconfont{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection:before{content:"\e600"}.icon-xlchatbox:before{content:"\e601"}.markdown-body embed,.markdown-body iframe,.markdown-body img:not(.equation),.markdown-body video{max-width:100%!important;margin:0}.markdown-body li{list-style:disc outside none;list-style:initial}.markdown-body img.lazyload{visibility:hidden}.markdown-body img.inited{background-color:#f8f9fa;background-position:50%;background-repeat:no-repeat;visibility:visible}.markdown-body img.loaded{background-image:none;background-color:transparent}.markdown-body img.error{background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/image-error.3338abe.png)}.markdown-body img.equation{margin:0 .1em;max-width:100%!important;vertical-align:middle}.markdown-body img:not(.equation){cursor:zoom-in}.markdown-body blockquote.warning{position:relative;border-left-color:#f75151;margin-left:8px}.markdown-body blockquote.warning:before{position:absolute;top:14px;left:-12px;background:#f75151;border-radius:50%;content:"!";width:20px;height:20px;color:#fff;display:flex;align-items:center;justify-content:center}.markdown-body pre{position:relative}.markdown-body pre>code.hljs[lang]:before{content:attr(lang);position:absolute;right:15px;top:2px;color:hsla(0,0%,54.9%,.8)}.markdown-body pre>code.hljs[lang][lang=bash]:before{content:""}.markdown-body pre>code.copyable .copy-code-btn{position:absolute;top:6px;right:15px;font-size:12px;line-height:1;cursor:pointer;color:hsla(0,0%,54.9%,.8);transition:color .1s}.markdown-body pre>code.copyable .copy-code-btn:hover{color:#8c8c8c}.markdown-body pre>code.copyable.hljs[lang]:before{right:70px}.markdown-body pre pre>code .copy-code-btn{display:none}.markdown-body pre pre>code.hljs[lang]:before{top:2px;right:15px}@media (max-width:720px){.markdown-body pre>code.copyable.hljs[lang]:before{right:1rem}}#nprogress{pointer-events:none}#nprogress .bar{background:#007fff;position:fixed;z-index:1031;top:0;left:0;width:100%;height:2px}#nprogress .peg{display:block;position:absolute;right:0;width:100px;height:100%;box-shadow:0 0 10px #007fff,0 0 5px #007fff;opacity:1;transform:rotate(3deg) translateY(-4px)}.nprogress-custom-parent{overflow:hidden;position:relative}.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}@-webkit-keyframes nprogress-spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes nprogress-spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}body{font-size:12px;line-height:normal}a,button,input{margin:initial}img{width:auto;height:auto}#juejin{overflow-x:visible;overflow-x:initial}html{font-size:12px;font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;word-break:break-word;text-rendering:optimizeLegibility;color:#333;background-color:#f4f5f5}html.white{background-color:#fff}body{word-break:break-word;overflow-y:scroll}a{text-decoration:none;cursor:pointer;color:#909090}a:hover{color:#007fff}button{list-style:1}button:disabled{cursor:not-allowed}button.disabled,button.disabled:hover{background-color:#d2d2d2;cursor:not-allowed}ul{padding:0;margin:0}li{list-style:none}#juejin-seo-meta{display:none}.container{position:relative;margin:0 auto;width:100%;max-width:960px}.container:after{display:table;content:"";clear:both}.hidden{display:none}.root-view-bg{position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:-1}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.align-center{text-align:center}.align-right{text-align:right}.align-middle{vertical-align:middle}.center{margin-left:auto;margin-right:auto}.text-normal{color:#333}.text-muted{color:#666}.text-muted1{color:#909090}.text-muted2{color:#838383}.text-gray{color:#909090}.text-light{color:#d2d2d2}.text-blue{color:#007fff}.text-blue-hover{color:#0371df}.text-green{color:#37c700}.text-green-hover{color:#3cb40e}.text-orange{color:#ff8900}.text-red{color:#e22323}.text-a,.text-link{cursor:pointer;color:#333}@include transition(color $speed-normal);.text-a:active,.text-a:hover,.text-link:active,.text-link:hover{color:#275b8c}.text-link{color:#259}.text-pointer{cursor:pointer}.line-wrap{white-space:pre-wrap;word-break:break-all}.ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text-bold,b,strong{font-weight:700}.view-nav{position:fixed;top:5rem;width:100%;height:3.833rem;z-index:100;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);transition:all .2s;transform:translateZ(0)}.view-nav,.view-nav:before{left:0;background-color:#fff}.view-nav:before{content:"";position:absolute;right:0;bottom:0;height:200%;z-index:-1}.view-nav.top{transform:translate3d(0,-5rem,0)}.view-nav .nav-list{max-width:960px;height:100%;margin:auto;display:flex;align-items:center;line-height:1}.view-nav .nav-list .nav-item{height:100%;align-items:center;display:flex;flex-shrink:0;font-size:1.16rem;color:#71777c;padding:0 1rem}.view-nav .nav-list .nav-item:first-child{padding:0 1rem 0 0}.view-nav .nav-list .nav-item:last-child{padding:0 0 0 1rem}.view-nav .nav-list .nav-item.active,.view-nav .nav-list .nav-item:hover{color:#007fff}.view-nav .nav-list .nav-item a{color:inherit}.nav-item{position:relative;cursor:pointer}.nav-item>a:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0}@media (max-width:980px){.view-nav .nav-list{width:auto;overflow-x:auto}.view-nav .nav-list .nav-item:first-child,.view-nav .nav-list .nav-item:last-child{padding:0 1.5rem}}.list-header{padding:1.3rem 1rem;border-bottom:1px solid hsla(0,0%,59.2%,.1)}.list-header .list-nav,.list-header .nav-list{display:flex;justify-content:space-between}.list-header .nav-list{align-items:center;line-height:1}.list-header .nav-list .nav-item.active a,.list-header .nav-list .nav-item a:hover{color:#007fff}.list-header .left .nav-item{padding:0 1.2rem;font-size:1.16rem;border-right:1px solid hsla(0,0%,59.2%,.2)}.list-header .left .nav-item:last-child{border:none}.list-header .right .nav-item{font-size:1.16rem;padding:0 .7rem;position:relative}.list-header .right .nav-item:not(:last-child):after{width:2px;height:2px;border-radius:50%;transform:translate(-50%,-50%);content:"";position:absolute;left:100%;top:50%;background-color:#2b445d;transform:translateY(-50%);opacity:.5}@media (max-width:600px){.list-header .right{display:none}}.button,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#007fff;color:#fff;border-radius:2px;border:none;padding:.5rem 1.3rem;outline:none;transition:background-color .3s,color .3s;cursor:pointer}.button:hover,button:hover{background-color:#0371df;color:#fff}i+span{margin-left:.6rem}button+button{margin-left:.8rem}.subscribe-btn{border:1px solid #37c700;background-color:#fff;color:#37c700;margin:1rem auto;font-size:1.1rem}.subscribe-btn:hover{background-color:#fff;color:#3cb40e;border-color:#3cb40e}.subscribe-btn.subscribed{background-color:#37c700;color:#fff}.subscribe-btn.subscribed:hover{background-color:#3cb40e}.radio-group{cursor:pointer;display:flex;align-items:center;font-size:14px}.radio-group .radio-label{margin-left:6px}input[type=radio]{width:16px;height:16px;border:1px solid #bfcbd9;border-radius:50%;background-color:#fff;cursor:pointer;box-sizing:border-box;position:relative;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=radio]:after{width:6px;height:6px;border-radius:50%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s cubic-bezier(.71,-.46,.88,.6)}input[type=radio]:checked{border-color:#20a0ff;background:#3a9afc}input[type=radio]:checked:after{transform:translate(-50%,-50%) scale(1)}input[type=radio]:disabled{background-color:#eef1f6;border-color:#d1dbe5;cursor:not-allowed}input[type=radio]:disabled:checked{border-color:#d1dbe5;background-color:#d1dbe5}input[name=registerSmsCode]::-webkit-contacts-auto-fill-button{display:none;visibility:hidden}.editable,input[type=password],input[type=text],input[type=url],textarea{resize:none;outline:none;width:100%;display:block;box-shadow:none;border:1px solid #ddd;border-radius:2px;transition:border .3s;background-color:#fff;box-sizing:border-box}.aside-top-section{background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);border-radius:2px;margin-bottom:1.3rem;font-size:1.16rem;line-height:1.29;color:#333}.aside-top-section .aside-header{padding:1rem 1.3rem;border-bottom:1px solid hsla(0,0%,59.2%,.1);color:#333;font-size:1.16rem}.aside-top-section .aside-list{padding:1rem 1.3rem}.aside-top-section .aside-list .item{margin-bottom:1.5rem}.busy-icon:before{-webkit-animation:busy-ani 1s linear infinite;animation:busy-ani 1s linear infinite}@-webkit-keyframes busy-ani{to{transform:rotate(1turn)}}@keyframes busy-ani{to{transform:rotate(1turn)}}
.request-health-alert[data-v-ded0787a]{position:fixed;left:2rem;bottom:2rem;padding:1rem;max-width:50%;color:#e33;background-color:#f6e3e3;border:1px solid #e99;z-index:10000}@media (max-width:600px){.request-health-alert[data-v-ded0787a]{display:none}}.title[data-v-ded0787a]{margin:0 0 .4em;font-size:1.5em}.content[data-v-ded0787a]{line-height:1.5}.btn[data-v-ded0787a]{color:inherit;text-decoration:underline;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.close[data-v-ded0787a]{position:absolute;top:0;right:0;padding:1rem;cursor:pointer;opacity:.5}.close[data-v-ded0787a]:hover{opacity:1}
.emoji-barrage .full-screen[data-v-68506677]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:1001;overflow:hidden}.emoji-inner-screen[data-v-68506677]{position:absolute;left:0;width:100%;height:100%;transform:translate3d(-100%,-100%,0)}.emoji-inner-screen .template[data-v-68506677]{position:relative;width:100%;height:100%}.emojin-inner-screen__0.animate[data-v-68506677]{-webkit-animation:left-data-v-68506677 6s ease-in;animation:left-data-v-68506677 6s ease-in}.emojin-inner-screen__1.animate[data-v-68506677]{-webkit-animation:6s ease-in normal-data-v-68506677;animation:6s ease-in normal-data-v-68506677}.emojin-inner-screen__2.animate[data-v-68506677]{-webkit-animation:right-data-v-68506677 6s ease-in;animation:right-data-v-68506677 6s ease-in}@-webkit-keyframes left-data-v-68506677{0%{transform:translate3d(-50%,-100%,0)}to{transform:translate3d(0,100%,0)}}@keyframes left-data-v-68506677{0%{transform:translate3d(-50%,-100%,0)}to{transform:translate3d(0,100%,0)}}@-webkit-keyframes normal-data-v-68506677{0%{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,100%,0)}}@keyframes normal-data-v-68506677{0%{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,100%,0)}}@-webkit-keyframes right-data-v-68506677{0%{transform:translate3d(50%,-100%,0)}to{transform:translate3d(0,100%,0)}}@keyframes right-data-v-68506677{0%{transform:translate3d(50%,-100%,0)}to{transform:translate3d(0,100%,0)}}
.modal-mask[data-v-06e234c4]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:501}.bind-phone-number-form[data-v-06e234c4]{position:fixed;padding:1.83rem 2.08rem;width:26.5rem;max-width:100%;font-size:1.167rem;background-color:#fff;border-radius:3px;box-sizing:border-box;top:50%;left:50%;z-index:502;transform:translate(-50%,-60%);box-shadow:0 2px 3px 0 rgba(0,0,0,.2)}.close-btn[data-v-06e234c4]{float:right;cursor:pointer;opacity:.4}.close-btn[data-v-06e234c4]:hover{opacity:1}.title[data-v-06e234c4]{font-size:1.42rem;color:#000;font-weight:600;margin:0 0 1rem}.hint[data-v-06e234c4]{font-size:1.25rem;line-height:1.6;font-weight:400;color:#000;margin-bottom:2rem}.hint>a[data-v-06e234c4]{color:#007fff}.input-group[data-v-06e234c4]{margin-bottom:1.5rem}.input-box[data-v-06e234c4]{position:relative;margin-bottom:.8rem}.dropdown-box[data-v-06e234c4]{padding:0 10px;border:1px solid #d9d9d9;display:flex;border-radius:2px;justify-content:center;align-items:center}.dropdown-box .input[data-v-06e234c4]{border:none}.dropdown-box.focus[data-v-06e234c4]{border-color:#007fff}.input[data-v-06e234c4]{width:100%;border:1px solid #e9e9e9;border-radius:2px;outline:none;box-sizing:border-box;padding:.67rem .67rem .67rem 4px}.input[data-v-06e234c4]:focus{border-color:#007fff}.number-input[data-v-06e234c4]{width:74%}.btn[data-v-06e234c4]{width:100%;height:2.92rem;color:#fff;background-color:#007fff;border-radius:2px;outline:none;box-sizing:border-box;cursor:pointer}.btn[data-v-06e234c4]:disabled{background-color:#909090;cursor:default}.vcode-box[data-v-06e234c4]{display:flex;justify-content:center;align-items:center}.vcode-box .input[data-v-06e234c4]{width:auto;flex-grow:1;overflow:hidden}.vcode-box .img-vcode[data-v-06e234c4]{border:1px solid #ddd;position:relative;box-sizing:border-box;overflow:hidden;z-index:0;width:160px;color:#333;height:40px;margin-left:15px;flex-shrink:0}.vcode-box .img-vcode img[data-v-06e234c4]{max-height:46px}.vcode-box .img-vcode .hint[data-v-06e234c4]{position:absolute;z-index:-1;top:0;left:0;display:flex;height:100%;width:100%;justify-content:center;align-items:center}.send-vcode-btn[data-v-06e234c4]{position:absolute;top:0;right:0;height:100%;color:#007fff;font-size:1.25rem;line-height:1;background-color:transparent}.send-vcode-btn[data-v-06e234c4]:disabled{color:#909090;cursor:default}.send-vcode-btn[data-v-06e234c4]:hover(:not(:disabled)){opacity:.8}.masker-fade-enter-active[data-v-06e234c4],.masker-fade-leave-active[data-v-06e234c4]{transition:opacity .3s}.masker-fade-enter[data-v-06e234c4],.masker-fade-leave-to[data-v-06e234c4]{opacity:0}.form-fade-enter-active[data-v-06e234c4],.form-fade-leave-active[data-v-06e234c4]{transition:.3s}.form-fade-enter[data-v-06e234c4],.form-fade-leave-to[data-v-06e234c4]{transform:translate(-50%,-52%);opacity:0}
.dropdown-input-container[data-v-4e5eda86]{height:100%;display:flex}.dropdown-input-container input[data-v-4e5eda86]{border:none;outline:none;width:32px;margin:0;padding:0}.dropdown-input-container .dropdown-input-box[data-v-4e5eda86]:before{content:"+"}.dropdown-input-container .arrow[data-v-4e5eda86]{cursor:pointer;transition:all .45s cubic-bezier(.8,.15,.15,.86)}.dropdown-input-container .dropdown-pannel[data-v-4e5eda86]{position:absolute;width:220px;max-height:188px;border-radius:4px;box-shadow:0 2px 5px 0 rgba(0,0,0,.08);border:1px solid #e8e8e8;background-color:#fff;overflow-y:auto;z-index:200;top:40px;left:-2px}.dropdown-input-container li.item[data-v-4e5eda86]{padding:8px 10px;font-size:14px;line-height:20px;justify-content:space-between;display:flex}.dropdown-input-container li.item[data-v-4e5eda86]:hover{cursor:pointer;background-color:#f5f5f5}.dropdown-input-container li.item.selected[data-v-4e5eda86]{color:#007fff}.dropdown-input-container li>span[data-v-4e5eda86]:last-child{color:#999}
@font-face{font-family:iconfont;src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358);src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358#iefix) format("embedded-opentype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.woff?t=1470110358) format("woff"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.ttf?t=1470110358) format("truetype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.svg?t=1470110358#iconfont) format("svg")}.iconfont[data-v-064b8453]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-064b8453]:before{content:"\e600"}.icon-xlchatbox[data-v-064b8453]:before{content:"\e601"}.column-view[data-v-064b8453]{padding:0 0 8rem}.main-area[data-v-064b8453]{position:relative;width:700px;max-width:100%;background-color:#fff;border-radius:2px;box-sizing:border-box}.main-area[data-v-064b8453]:after{display:table;content:"";clear:both}.article-area[data-v-064b8453]{margin-bottom:1.5rem;padding:0 2rem}.article[data-v-064b8453]{margin-bottom:3rem;padding:2rem 0 0}.article-placeholder[data-v-064b8453]{width:100%}.author-info-block[data-v-064b8453]{display:flex;align-items:center;margin-bottom:2rem}.author-info-block .avatar-link[data-v-064b8453]{font-size:0}.author-info-block .avatar[data-v-064b8453]{flex:0 0 auto;margin-right:1rem;width:3.333rem;height:3.333rem;border-radius:50%}.author-info-block .author-info-box[data-v-064b8453]{min-width:0;flex-grow:1;flex:1}.author-info-block .username[data-v-064b8453]{display:inline-block;width:100%;font-size:1.3rem;font-weight:700;color:#333}.author-info-block .meta-box[data-v-064b8453]{font-size:1.1rem;color:#909090}.author-info-block .time[data-v-064b8453]{letter-spacing:1px}.author-info-block .views-count[data-v-064b8453]{margin-left:.5em}.author-info-block .dot[data-v-064b8453]{margin:0 .5em}@media (max-width:600px){.author-info-block .dot[data-v-064b8453]{margin:0 .2em}}@media (max-width:600px){.author-info-block .follow[data-v-064b8453]{margin-top:12px}}.author-info-block .edit-btn[data-v-064b8453]{color:#1264b6;cursor:pointer}.author-info-block .edit-btn[data-v-064b8453]:hover{text-decoration:underline}.article-hero[data-v-064b8453]{margin-bottom:2rem;width:100%}.article-hero[data-v-064b8453]:after{content:"";display:block;padding-top:56.29%;width:100%;pointer-events:none}.article-title[data-v-064b8453]{margin:.67em 0;font-size:2.5rem;font-weight:700;line-height:1.5}@media (max-width:600px){.article-title[data-v-064b8453]{font-size:2rem}}.article-title .audit-tag-wrap[data-v-064b8453]{transform:translateY(-.5em)}.tag-list-box[data-v-064b8453]{margin-bottom:2rem}.tag-list-box .tag-list-title[data-v-064b8453]{margin-bottom:2rem;padding:0 0 0 2rem;font-size:1.25rem;font-weight:600;color:#000;border-left:6px solid #ddd}.tag-list-box .tag-list[data-v-064b8453]{display:flex;flex-wrap:wrap}.tag-list-box .tag-list .item[data-v-064b8453]{display:flex;align-items:center;margin:0 1.25rem 1rem 0;padding:.167rem;background-color:#fff;border:1px solid #e3e3e3;border-radius:2px}.tag-list-box .tag-list .tag-icon[data-v-064b8453]{width:1.75rem;height:1.75rem;border-radius:2px}@media (max-width:600px){.tag-list-box .tag-list .tag-icon[data-v-064b8453]{display:none}}.tag-list-box .tag-list .tag-title[data-v-064b8453]{padding:0 .75rem;font-size:1rem;line-height:1.75rem;color:#919191}.wechat-banner[data-v-064b8453]{margin-bottom:2rem}@media (min-width:960px){.wechat-banner[data-v-064b8453]{display:none}}.book-box[data-v-064b8453]{margin-bottom:2rem}@media (min-width:960px){.book-box[data-v-064b8453]{display:none}}.footer-author-block[data-v-064b8453]{padding:15px 17px;border-radius:2px;background-color:#f4f5f5;margin-bottom:2rem}@media (max-width:600px){.footer-author-block[data-v-064b8453]{padding:15px 1rem}}.article-banner[data-v-064b8453]{margin-bottom:2.5rem;padding:0 0 0 2rem;border-left:6px solid #ddd}.article-banner .banner-title[data-v-064b8453]{font-size:1.3rem;line-height:1.6;color:#007fff}.article-banner .banner-content[data-v-064b8453]{margin-top:.2rem;font-size:1.1rem;line-height:1.4;color:#909090}.comment-box[data-v-064b8453]{padding:0 2rem}.comment-box.extended[data-v-064b8453]{padding-bottom:2rem}@media (max-width:600px){.comment-box[data-v-064b8453]{padding:0}}.comment-box .comment-title[data-v-064b8453]{margin-bottom:1.3rem;font-size:1.3rem;font-weight:500;text-align:center;color:#909090}.comment-box .comment-form[data-v-064b8453]{margin-bottom:1rem}.recommended-entry-list-title[data-v-064b8453]{padding:1.3rem 2rem;font-size:1.25rem;font-weight:600;color:#909090;border-bottom:1px solid rgba(178,186,194,.15)}.sidebar[data-v-064b8453]{position:absolute;top:0;right:0;width:20rem}.article-suspended-panel[data-v-064b8453]{position:fixed;margin-left:-7rem;top:16rem}.action-bar[data-v-064b8453]{position:fixed;z-index:1;bottom:0;width:100%;left:0}@media (max-width:960px){.sidebar[data-v-064b8453]{display:none}.main-area[data-v-064b8453]{width:100%}.article-area[data-v-064b8453]{margin-bottom:0}.open-in-app[data-v-064b8453]{bottom:6rem}}.border[data-v-064b8453]{border-bottom:1px solid rgba(178,186,194,.15)}
.main-header-box[data-v-6a3e47cf]{position:relative;height:5rem}.main-header[data-v-6a3e47cf]{position:fixed;top:0;left:0;right:0;transition:all .2s;transform:translate3d(0,-100%,0)}.main-header.visible[data-v-6a3e47cf]{transform:translateZ(0)}.main-container>.view[data-v-6a3e47cf]{margin-top:1.767rem}.main-container.with-view-nav>.view[data-v-6a3e47cf]{margin-top:4.67rem}.main-container.tight>.view[data-v-6a3e47cf]{margin-top:0}.main-container.tight.with-view-nav>.view[data-v-6a3e47cf]{margin-top:3.833rem}
@font-face{font-family:iconfont;src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358);src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358#iefix) format("embedded-opentype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.woff?t=1470110358) format("woff"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.ttf?t=1470110358) format("truetype"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.svg?t=1470110358#iconfont) format("svg")}.iconfont[data-v-6f082a2c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-6f082a2c]:before{content:"\e600"}.icon-xlchatbox[data-v-6f082a2c]:before{content:"\e601"}.logo[data-v-6f082a2c]{min-width:98px;margin-right:2rem}.nav-item a[data-v-6f082a2c]{color:#71777c}.nav-item.active>.icon[data-v-6f082a2c],.nav-item.active>a[data-v-6f082a2c]{color:#007fff}.nav-item.discount[data-v-6f082a2c]:after{content:"";position:absolute;width:35px;height:28px;background:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/half_discount.3daad5d.gif);background-size:35px 28px;right:-14px;top:10px}.nav-menu-item>a[data-v-6f082a2c]{display:block;color:#71777c}.avatar[data-v-6f082a2c]{width:2.5rem;height:2.5rem;position:relative}.avatar[data-v-6f082a2c],.badge[data-v-6f082a2c]{border-radius:50%}.badge[data-v-6f082a2c]{position:absolute;top:10px;right:-5px;width:11px;height:11px;background-color:#2f74e9}.main-header[data-v-6f082a2c]{background:#fff;border-bottom:1px solid #f1f1f1;color:#909090;height:5rem;z-index:250}.main-header .container[data-v-6f082a2c]{max-width:960px;margin:auto}.container[data-v-6f082a2c]{display:flex;align-items:center;height:100%}.main-nav[data-v-6f082a2c]{height:100%;flex:1 0 auto}.main-nav-list[data-v-6f082a2c]{display:flex}.phone-show-menu[data-v-6f082a2c]{cursor:pointer;display:none}.phone-hide[data-v-6f082a2c]{display:flex}.nav-list[data-v-6f082a2c]{justify-content:flex-end;position:relative}.nav-item[data-v-6f082a2c],.nav-list[data-v-6f082a2c]{display:flex;align-items:center;height:100%;margin:0}.nav-item[data-v-6f082a2c]{color:#71777c;padding:0 1.2rem;font-size:1.33rem;justify-content:center;cursor:pointer}.nav-item.activities .tip[data-v-6f082a2c]{z-index:2;cursor:auto;width:17rem;background:#fff;padding:1rem;display:flex;justify-content:flex-start;position:absolute;top:4.5rem;left:-50%;margin-left:-3.7rem;color:#17181a;font-size:15px;border-radius:2px;box-shadow:0 2px 20px 0 rgba(0,0,0,.12)}.nav-item.activities .tip .panfish[data-v-6f082a2c]{height:63px;width:57px;flex:0 0 auto;background-repeat:no-repeat;background-size:contain}.nav-item.activities .tip .content[data-v-6f082a2c]{display:flex;flex-direction:column;padding:.5rem 0 0 .5rem;color:#17181a}.nav-item.activities .tip .content button[data-v-6f082a2c]{padding:0;width:6.41rem;height:2rem;color:#fff;font-size:13px;border-radius:12px;margin-top:.5rem}.nav-item.activities .tip .triangle[data-v-6f082a2c]{display:block;position:absolute;top:0;left:50%;width:1rem;height:1rem;transform:translate(-50%,-50%) rotate(45deg);background:#fff;border-top:1px solid #f4f5f5;border-left:1px solid #f4f5f5}.nav-item.activities .tip .close[data-v-6f082a2c]{cursor:pointer;width:1rem;height:1rem;position:absolute;top:.5rem;right:.5rem;border-radius:50%;background:#fff;transform:rotate(45deg)}.nav-item.activities .tip .close[data-v-6f082a2c]:after,.nav-item.activities .tip .close[data-v-6f082a2c]:before{content:"";width:.8rem;height:2px;display:block;position:absolute;background:#c5c5c5;left:50%;top:50%;transform:translate(-50%,-50%)}.nav-item.activities .tip .close[data-v-6f082a2c]:after{transform:translate(-50%,-50%) rotate(90deg)}.nav-item.activities .tip .close[data-v-6f082a2c]:hover{opacity:.8}.nav-item .login-button[data-v-6f082a2c]{border:1px solid #007fff;background-color:#fff;padding:.3rem 1.6rem;color:#007fff;line-height:1.9rem}.nav-item:hover>a[data-v-6f082a2c]{color:#007fff}.nav-item[data-v-6f082a2c]:last-child{padding-right:0}.nav-item.link-item[data-v-6f082a2c]{padding:0 1.5rem;height:5rem}.nav-item.book.new-year a[data-v-6f082a2c]:after{left:0;top:0;position:absolute;content:"";background-position:50%;background-repeat:no-repeat;background-size:60px auto;width:100%;height:100%}.nav-item.search[data-v-6f082a2c]{flex:1 1 auto;justify-content:flex-end;cursor:auto}.nav-item.add[data-v-6f082a2c]{cursor:default}.nav-item.notification:hover .icon[data-v-6f082a2c]{color:#007fff}.nav-item.menu[data-v-6f082a2c],.nav-item.submit[data-v-6f082a2c]{position:relative}.nav-item.submit[data-v-6f082a2c]{color:#007fff}.nav-item.submit[data-v-6f082a2c]:hover{color:#0371df}.nav-item.submit[data-v-6f082a2c]:after{content:"|";position:absolute;top:20px;left:100%;color:hsla(0,0%,59.2%,.4)}.nav-item.submit .submit-panel[data-v-6f082a2c]{position:absolute;top:101%;left:-123px;width:326px;box-sizing:border-box;padding:2.5rem 2rem;border-radius:2px;color:#909090;font-size:1.1rem;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid rgba(178,181,187,.5);cursor:default;z-index:11}.nav-item.submit .submit-panel[data-v-6f082a2c]:before{content:"";position:absolute;top:0;left:50%;width:1rem;height:1rem;border-top:1px solid rgba(178,181,187,.5);border-left:1px solid rgba(178,181,187,.5);background-color:#fff;transform:rotate(45deg) translate(-50%,-50%);transform-origin:0 0}.nav-item.submit .submit-panel .title[data-v-6f082a2c]{font-size:1.4rem;line-height:1;font-weight:700;color:#000;text-align:center;margin-bottom:2rem}.nav-item.submit .submit-panel .benefit-list[data-v-6f082a2c]{margin-left:2rem}.nav-item.submit .submit-panel .item[data-v-6f082a2c]{list-style:disc outside none;list-style:initial;margin-bottom:1rem}.nav-item.submit .submit-panel .link[data-v-6f082a2c]{color:#6cbd45;text-decoration:underline}.nav-item.submit .submit-panel button[data-v-6f082a2c]{display:block;margin:2rem auto 0;background-color:#83c73a;font-size:1.2rem;padding:1rem 4rem}.nav-item.auth[data-v-6f082a2c]{color:#007fff;padding:0}.nav-item.auth span[data-v-6f082a2c]:hover{color:#0371df}.nav-item.auth .login[data-v-6f082a2c]:after{content:"·";margin:0 .4rem}.nav-item .icon[data-v-6f082a2c]{font-size:2rem;color:#71777c}.nav-item .icon[data-v-6f082a2c]:hover{color:#007fff}.submit-fixed-bg[data-v-6f082a2c]{position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;z-index:10}.search-form[data-v-6f082a2c]{border:1px solid hsla(0,0%,59.2%,.2);background-color:rgba(227,231,236,.2);display:flex;align-items:center;justify-content:space-between;border-radius:2px}.search-form.active[data-v-6f082a2c]{background-color:#fff;border:1px solid #007fff}.search-form .search-icon[data-v-6f082a2c]{padding:0 .5rem;cursor:pointer}.search-form .search-input[data-v-6f082a2c]{border:none;width:11rem;padding:.6rem 0 .6rem 1rem;box-shadow:none;outline:none;font-size:1.1rem;color:#666;background-color:transparent}.nav-menu[data-v-6f082a2c]{position:absolute;width:11rem;left:50%;top:100%;transform:translateX(-50%);margin:0;padding:0;list-style:none;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid rgba(177,180,185,.45);border-radius:4px;font-size:1.2rem}.nav-menu .nav-menu-item-group[data-v-6f082a2c]{padding:1rem 0}.nav-menu .nav-menu-item[data-v-6f082a2c]{font-size:1.3rem;cursor:pointer}.nav-menu .nav-menu-item[data-v-6f082a2c]:hover{background-color:hsla(0,0%,94.9%,.5)}.nav-menu .nav-menu-item>a[data-v-6f082a2c]{display:flex;align-items:center;padding:.5rem 1rem}.nav-menu .nav-menu-item>a>span[data-v-6f082a2c]{margin-left:0;flex-grow:1}.nav-menu .nav-menu-item>a.link-icon[data-v-6f082a2c]{padding-right:.5rem}.nav-menu .nav-menu-item .collect[data-v-6f082a2c],.nav-menu .nav-menu-item .zan[data-v-6f082a2c]{margin-right:.8rem;width:18.72px;height:18px}.nav-menu .nav-menu-item .icon-2018[data-v-6f082a2c]{width:38px;height:20px;border-radius:1rem;margin-left:2px;background-image:url(https://gold-cdn.xitu.io/asset/2018/2018-icon.png);background-size:102% 100%;background-repeat:no-repeat;box-shadow:3px 3px 6px -3px #999}.nav-menu .nav-menu-item .icon-2018[data-v-6f082a2c]:hover{opacity:.9}.nav-menu .more[data-v-6f082a2c]{position:relative}.nav-menu .more:hover .more-dropdown-list[data-v-6f082a2c]{display:block}.nav-menu .more .more-icon[data-v-6f082a2c]{float:right;color:#b2bac2;font-size:1.2rem;line-height:2rem}.nav-menu.user-dropdown-list[data-v-6f082a2c]{width:13.1rem;right:0;left:auto;transform:translateX(0)}.nav-menu.user-dropdown-list .nav-menu-item-group[data-v-6f082a2c]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.04)}.add-group[data-v-6f082a2c]{display:flex;align-items:center;position:relative;height:2.667rem;cursor:pointer}.add-group.active .more-list[data-v-6f082a2c]{display:block}.add-group .add-btn[data-v-6f082a2c],.add-group .more[data-v-6f082a2c]{height:100%;color:#fff;background-color:#007fff;border-radius:3px}.add-group .add-btn.active[data-v-6f082a2c],.add-group .add-btn[data-v-6f082a2c]:hover,.add-group .more.active[data-v-6f082a2c],.add-group .more[data-v-6f082a2c]:hover{background-color:#0876e4}.add-group .add-btn[data-v-6f082a2c]{padding:0 .9rem;font-size:1.167rem;border-top-right-radius:0;border-bottom-right-radius:0}.add-group .more[data-v-6f082a2c]{flex:0 0 auto;display:flex;align-items:center;justify-content:center;width:1.25rem;border-left:1px solid hsla(0,0%,100%,.1);border-top-left-radius:0;border-bottom-left-radius:0}.add-group .more .more-icon[data-v-6f082a2c]{margin-top:.2rem;font-size:1rem}.add-group .more-list[data-v-6f082a2c]{position:absolute;top:100%;left:0;right:0;padding:.417rem 0;font-size:1.167rem;color:#3b76c5;background-color:#fff;border:1px solid #ebebeb;border-radius:2px;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);display:none;z-index:1}.add-group .more-list .item[data-v-6f082a2c]{padding:0 0 0 .8rem;line-height:1.9}.add-group .more-list .item[data-v-6f082a2c]:hover{background-color:#f9f9f9}.more-dropdown-list[data-v-6f082a2c]{position:absolute;left:auto;top:0;right:102%;transform:translateX(0);display:none}.more-dropdown-list[data-v-6f082a2c]:after{content:"";position:absolute;top:0;left:100%;width:1.3rem;height:4rem}.notification[data-v-6f082a2c]{position:relative}.notification.active .icon[data-v-6f082a2c]{color:#007fff}.notification .count[data-v-6f082a2c]{position:absolute;left:50%;bottom:43%;margin:0;font-size:1rem;line-height:1;text-align:center;background-color:#007fff;border-radius:3rem;word-break:normal;display:inline-block;color:#f1f1f1;transform:scale(.8);font-size:13px;font-weight:500;padding:3px 6px;background:#f03535;border-radius:100px;border:2px solid #fff}.fengwei[data-v-6f082a2c]{display:inline-block;width:1em;height:1em;margin-right:.8rem;font-size:1.2em;vertical-align:middle;color:#b2bac2}.fix-bg[data-v-6f082a2c]{position:fixed;top:0;left:0;bottom:0;right:0;opacity:0}.mobile[data-v-6f082a2c]{display:none}@media (max-width:980px){.logo[data-v-6f082a2c]{margin-right:0;margin-left:.67rem}.container[data-v-6f082a2c]{width:96%}.main-nav-list[data-v-6f082a2c]{display:block;position:absolute;left:0;top:0;background-color:#fff;z-index:1}.phone-show-menu[data-v-6f082a2c]{height:5rem;display:flex;align-items:center;color:#007fff;font-size:1.33rem;justify-content:center;padding:0;width:5.66rem}.phone-show-menu span[data-v-6f082a2c]{margin-right:.6rem}.phone-hide[data-v-6f082a2c]{display:none;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid rgba(177,180,185,.45);border-radius:4px;font-size:1.2rem}.phone-hide.show[data-v-6f082a2c]{display:block}.nav-item.link-item[data-v-6f082a2c]{height:4rem}.nav-item.add[data-v-6f082a2c],.nav-item.submit[data-v-6f082a2c],.pinTip[data-v-6f082a2c]{display:none}.tip[data-v-6f082a2c]{display:none!important}.nav-menu .nav-menu-item .icon-2018[data-v-6f082a2c]{width:35px;margin-left:0}}@media (max-width:700px){.nav-item.search[data-v-6f082a2c]{display:flex;padding-right:1.2rem}.nav-item .search-form .search-input[data-v-6f082a2c]{width:11rem;padding:.6rem}.nav-item .search-form .search-icon[data-v-6f082a2c]{display:none}.logo[data-v-6f082a2c]{min-width:3.75rem}.logo-img[data-v-6f082a2c]{display:none}.mobile[data-v-6f082a2c]{display:block}.notification[data-v-6f082a2c]{padding:0 .8rem}}@media (max-width:375px){.nav-item .search-form .search-input[data-v-6f082a2c]{width:10rem}}@media (max-width:330px){.nav-item.search[data-v-6f082a2c]{display:none}.nav-item.search .search-form .search-input[data-v-6f082a2c]{width:5rem}}.tip-fade-enter-active[data-v-6f082a2c],.tip-fade-leave-active[data-v-6f082a2c]{transition:.3s}.tip-fade-enter[data-v-6f082a2c],.tip-fade-leave-to[data-v-6f082a2c]{transform:translateY(-10px);opacity:0}
.avatar[data-v-1c418ef0]{display:inline-block;position:relative;background-size:cover;background-color:#eee}.avatar[data-v-1c418ef0],.avatar.xmas[data-v-1c418ef0]:after{background-position:50%;background-repeat:no-repeat}.avatar.xmas[data-v-1c418ef0]:after{content:"";position:absolute;left:25%;bottom:30%;width:90%;height:90%;background-size:contain;background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/hats.12a740a.svg);transform:rotate(15deg);transform-origin:bottom right;transition:all .2s}.avatar.xmas[data-v-1c418ef0]:hover:after{transform:rotate(20deg)}
.lazy[data-v-47cc2604]{position:relative}.lazy[data-v-47cc2604]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-color:inherit;border-radius:inherit}.lazy[data-v-47cc2604]:not(.immediate):before{transition:opacity .2s}.lazy.loaded[data-v-47cc2604]:before{opacity:0;pointer-events:none}
.username[data-v-1b6b7cba]{font-size:1.25rem;font-weight:600;color:#2e3135}.username .name[data-v-1b6b7cba]{display:inline-block;vertical-align:top;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.recommend-author-block .username .name[data-v-1b6b7cba]{max-width:130px}.recommendation-index-view .username .name[data-v-1b6b7cba]{max-width:200px}
.follow-button[data-v-06c7d5b3]{margin:0 0 0 auto;padding:0;width:55px;height:26px;font-size:13px;border:1px solid #6cbd45;color:#6cbd45;background-color:#fff}.follow-button[data-v-06c7d5b3]:hover{opacity:.8}.follow-button.followed[data-v-06c7d5b3]{color:#fff;border-color:#6cbd45;background-color:#6cbd45}
[data-v-78c9b824] .image-viewer{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000}[data-v-78c9b824] .image-viewer.loading:after{content:"";position:absolute;top:0;right:100%;width:50%;height:.2rem;background-color:#007fff;z-index:1;-webkit-animation:pro-data-v-78c9b824 1s ease-in-out infinite;animation:pro-data-v-78c9b824 1s ease-in-out infinite;-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes pro-data-v-78c9b824{0%{transform:translateZ(0)}to{transform:translate3d(300%,0,0)}}@keyframes pro-data-v-78c9b824{0%{transform:translateZ(0)}to{transform:translate3d(300%,0,0)}}
.panel-btn[data-v-19356a56]{position:relative;margin-bottom:.75rem;width:3rem;height:3rem;background-color:#fff;background-position:50%;background-repeat:no-repeat;border-radius:50%;box-shadow:0 2px 4px 0 rgba(0,0,0,.04);cursor:pointer}.panel-btn:not(.share-btn).active.with-badge[data-v-19356a56]:after{background-color:#74ca46}.panel-btn.with-badge[data-v-19356a56]:after{content:attr(badge);position:absolute;top:0;left:75%;padding:.1rem .4rem;font-size:1rem;text-align:center;line-height:1;white-space:nowrap;color:#fff;background-color:#b2bac2;border-radius:.7rem;transform-origin:left top;transform:scale(.75)}.panel-btn.like-btn[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDE2IDE1Ij4KICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuODc0IDYuMDQ0VjE1aC0xLjczQy41MTMgMTUgMCAxNC4zODIgMCAxMy42MjRWNy41MjljMC0uNzkuNTM1LTEuNDg1IDEuMTQzLTEuNDg1aDEuNzMxek03LjYwNyAxLjI1QzcuNzIuNTA3IDguMzQ0LS4wMTMgOS4wMyAwYy45OC4wMTkgMS41NjMuODMzIDEuNzY2IDEuMjM1LjM3LjczNS4zOCAxLjk0Ni4xMjYgMi43MjQtLjIzLjcwNC0uNzYxIDEuNjI5LS43NjEgMS42MjloMy45ODJjLjQyIDAgLjgxMS4yMDYgMS4wNzIuNTYzYTEuNSAxLjUgMCAwIDEgLjIzMiAxLjI3MmwtMS44MDEgNi41MTNjLS4xNjQuNjI3LS43MDcgMS4wNjQtMS4zMiAxLjA2NEg0LjVWNS44OThDNi4yOTkgNS41MSA3LjQwNCAyLjU5IDcuNjA3IDEuMjQ5eiIvPgo8L3N2Zz4K)}.panel-btn.like-btn[data-v-19356a56]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDE2IDE1Ij4KICAgIDxwYXRoIGZpbGw9IiM4QTkzQTAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuODc0IDYuMDQ0VjE1aC0xLjczQy41MTMgMTUgMCAxNC4zODIgMCAxMy42MjRWNy41MjljMC0uNzkuNTM1LTEuNDg1IDEuMTQzLTEuNDg1aDEuNzMxek03LjYwNyAxLjI1QzcuNzIuNTA3IDguMzQ0LS4wMTMgOS4wMyAwYy45OC4wMTkgMS41NjMuODMzIDEuNzY2IDEuMjM1LjM3LjczNS4zOCAxLjk0Ni4xMjYgMi43MjQtLjIzLjcwNC0uNzYxIDEuNjI5LS43NjEgMS42MjloMy45ODJjLjQyIDAgLjgxMS4yMDYgMS4wNzIuNTYzYTEuNSAxLjUgMCAwIDEgLjIzMiAxLjI3MmwtMS44MDEgNi41MTNjLS4xNjQuNjI3LS43MDcgMS4wNjQtMS4zMiAxLjA2NEg0LjVWNS44OThDNi4yOTkgNS41MSA3LjQwNCAyLjU5IDcuNjA3IDEuMjQ5eiIvPgo8L3N2Zz4K)}.panel-btn.like-btn.active[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDE2IDE1Ij4KICAgIDxwYXRoIGZpbGw9IiM2Q0JENDUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuODc0IDYuMDQ0VjE1aC0xLjczQy41MTMgMTUgMCAxNC4zODIgMCAxMy42MjRWNy41MjljMC0uNzkuNTM1LTEuNDg1IDEuMTQzLTEuNDg1aDEuNzMxek03LjYwNyAxLjI1QzcuNzIuNTA3IDguMzQ0LS4wMTMgOS4wMyAwYy45OC4wMTkgMS41NjMuODMzIDEuNzY2IDEuMjM1LjM3LjczNS4zOCAxLjk0Ni4xMjYgMi43MjQtLjIzLjcwNC0uNzYxIDEuNjI5LS43NjEgMS42MjloMy45ODJjLjQyIDAgLjgxMS4yMDYgMS4wNzIuNTYzYTEuNSAxLjUgMCAwIDEgLjIzMiAxLjI3MmwtMS44MDEgNi41MTNjLS4xNjQuNjI3LS43MDcgMS4wNjQtMS4zMiAxLjA2NEg0LjVWNS44OThDNi4yOTkgNS41MSA3LjQwNCAyLjU5IDcuNjA3IDEuMjQ5eiIvPgo8L3N2Zz4K)}.panel-btn.like-btn.like-adjust[data-v-19356a56]{background-position:53% 46%}.panel-btn.comment-btn[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDE0IDEzIj4KICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE0IDB2OS4yM0g4LjgxNUwzLjM3IDEzVjkuMjNIMFYweiIvPgo8L3N2Zz4K)}.panel-btn.comment-btn[data-v-19356a56]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDE0IDEzIj4KICAgIDxwYXRoIGZpbGw9IiM4QTkzQTAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE0IDB2OS4yM0g4LjgxNUwzLjM3IDEzVjkuMjNIMFYweiIvPgo8L3N2Zz4K)}.panel-btn.comment-btn.comment-adjust[data-v-19356a56]{background-position:50% 55%}.panel-btn.collect-btn[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNyIgdmlld0JveD0iMCAwIDE3IDE3Ij4KICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkuMzMyIDE0Ljk2OGMtLjQ2LS4yNTUtMS4yMDUtLjI1NS0xLjY2NiAwTDQuMzUgMTYuNzk0Yy0uOTIxLjUwNi0xLjUyMy4wNDQtMS4zNDktMS4wMjdsLjYzNS0zLjg2N2MuMDg4LS41MzctLjE0Mi0xLjI4LS41MTYtMS42NkwuNDM2IDcuNWMtLjc0NS0uNzYtLjUxMS0xLjUwNC41MTYtMS42NmwzLjcwNy0uNTY0Yy41MTQtLjA4IDEuMTE5LS41MzggMS4zNDgtMS4wMjdMNy42NjUuNzMxYy40NjItLjk3NiAxLjIwOC0uOTczIDEuNjY3IDBsMS42NiAzLjUxOWMuMjMuNDg5LjgzMy45NSAxLjM0OSAxLjAyN2wzLjcwOC41NjRjMS4wMjkuMTU2IDEuMjU4LjkwMi41MTUgMS42NmwtMi42ODUgMi43MzljLS4zNzIuMzgtLjYwMyAxLjEyMy0uNTE1IDEuNjZsLjYzNCAzLjg2N2MuMTc2IDEuMDc0LS40MyAxLjUzMy0xLjM0OCAxLjAyN2wtMy4zMTgtMS44MjZ6Ii8+Cjwvc3ZnPgo=)}.panel-btn.collect-btn[data-v-19356a56]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNyIgdmlld0JveD0iMCAwIDE3IDE3Ij4KICAgIDxwYXRoIGZpbGw9IiM4QTkzQTAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkuMzMyIDE0Ljk2OGMtLjQ2LS4yNTUtMS4yMDUtLjI1NS0xLjY2NiAwTDQuMzUgMTYuNzk0Yy0uOTIxLjUwNi0xLjUyMy4wNDQtMS4zNDktMS4wMjdsLjYzNS0zLjg2N2MuMDg4LS41MzctLjE0Mi0xLjI4LS41MTYtMS42NkwuNDM2IDcuNWMtLjc0NS0uNzYtLjUxMS0xLjUwNC41MTYtMS42NmwzLjcwNy0uNTY0Yy41MTQtLjA4IDEuMTE5LS41MzggMS4zNDgtMS4wMjdMNy42NjUuNzMxYy40NjItLjk3NiAxLjIwOC0uOTczIDEuNjY3IDBsMS42NiAzLjUxOWMuMjMuNDg5LjgzMy45NSAxLjM0OSAxLjAyN2wzLjcwOC41NjRjMS4wMjkuMTU2IDEuMjU4LjkwMi41MTUgMS42NmwtMi42ODUgMi43MzljLS4zNzIuMzgtLjYwMyAxLjEyMy0uNTE1IDEuNjZsLjYzNCAzLjg2N2MuMTc2IDEuMDc0LS40MyAxLjUzMy0xLjM0OCAxLjAyN2wtMy4zMTgtMS44MjZ6Ii8+Cjwvc3ZnPgo=)}.panel-btn.collect-btn.active[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNyIgdmlld0JveD0iMCAwIDE3IDE3Ij4KICAgIDxwYXRoIGZpbGw9IiNGRkMzNDciIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkuMzMyIDE0Ljk2OGMtLjQ2LS4yNTUtMS4yMDUtLjI1NS0xLjY2NiAwTDQuMzUgMTYuNzk0Yy0uOTIxLjUwNi0xLjUyMy4wNDQtMS4zNDktMS4wMjdsLjYzNS0zLjg2N2MuMDg4LS41MzctLjE0Mi0xLjI4LS41MTYtMS42NkwuNDM2IDcuNWMtLjc0NS0uNzYtLjUxMS0xLjUwNC41MTYtMS42NmwzLjcwNy0uNTY0Yy41MTQtLjA4IDEuMTE5LS41MzggMS4zNDgtMS4wMjdMNy42NjUuNzMxYy40NjItLjk3NiAxLjIwOC0uOTczIDEuNjY3IDBsMS42NiAzLjUxOWMuMjMuNDg5LjgzMy45NSAxLjM0OSAxLjAyN2wzLjcwOC41NjRjMS4wMjkuMTU2IDEuMjU4LjkwMi41MTUgMS42NmwtMi42ODUgMi43MzljLS4zNzIuMzgtLjYwMyAxLjEyMy0uNTE1IDEuNjZsLjYzNCAzLjg2N2MuMTc2IDEuMDc0LS40MyAxLjUzMy0xLjM0OCAxLjAyN2wtMy4zMTgtMS44MjZ6Ii8+Cjwvc3ZnPgo=)}.panel-btn.weibo-btn[data-v-19356a56]{background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/weibo.2076a57.svg)}.panel-btn.weibo-btn[data-v-19356a56]:hover{background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/weibo-hover.9abf502.svg)}.panel-btn.qq-btn[data-v-19356a56]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE1IDE2Ij4KICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjQ2OCAxMC4zMTJjLS4wMS0uOTU3LS4zOC0xLjQ3Ni0uODA3LTIuMTUzLS4xOTEtLjI4My0uNDEzLS40NzMtLjYwNS0uNzU1LS4wMy0uMTU0LjAzMy0uMjY4LS4wMTItLjY3MS0uMDQyLS42MDQtLjI2My0uODM4LS4zMS0uOTEyLjAyLS4xNi0uMDQzLTEuNDg1LS41MjMtMi4yNjhDMTAuNzUxLjk0MSA3Ljk4Mi44NDYgNy42NDMuODQ0SDcuNjRjLS4zMzkuMDAyLTMuMTA3LjA5Ny00LjU2OCAyLjcxLS40NzkuNzgyLS41NDMgMi4xMDYtLjUyMyAyLjI2Ny0uMDQ2LjA3NC0uMjY3LjMwOC0uMzEuOTEyLS4wNDQuNDAzLjAxOC41MTctLjAxMi42Ny0uMTkyLjI4NC0uNDEzLjQ3My0uNjA1Ljc1Ni0uNDI2LjY3Ny0uNzk3IDEuMTk2LS44MDYgMi4xNTMtLjAwNy43MTQuMTYyIDEuNjg3LjY2MyAxLjcuMTU4LS4wMTIuMjkyLS4xMTcuNTY2LS40MjQuMDgyLS4wOTIuMzctLjQ4LjQyOS0uNTg3LjA1Ni4xNDguMTkgMS4xODMgMS4xMiAxLjcyMy0uOTU2LjQ1LTEuNDI0LjczNS0xLjQ0IDEuMzE5LjAyLjMzOC40MjMuNzg3IDEuMTY1Ljk5NmE2LjA1IDYuMDUgMCAwIDAgMi45MjcuMDVjLjUzNS0uMTMuNjk2LS4yNiAxLjM5Ni0uNjQ0LjcuMzg1Ljg2LjUxNCAxLjM5NS42NDNhNi4wNTIgNi4wNTIgMCAwIDAgMi45MjctLjA0OWMuNzQyLS4yMDkgMS4xNDYtLjY1OCAxLjE2Ni0uOTk2LS4wMTYtLjU4NC0uNDg0LS44Ny0xLjQ0LTEuMzIuOTMtLjUzOCAxLjA2My0xLjU3NCAxLjEyLTEuNzIyLjA1OC4xMDcuMzQ2LjQ5NS40MjguNTg3LjI3NC4zMDcuNDA5LjQxMi41NjcuNDI0LjUtLjAxMy42Ny0uOTg2LjY2My0xLjd6Ii8+Cjwvc3ZnPgo=)}.panel-btn.qq-btn[data-v-19356a56]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE1IDE2Ij4KICAgIDxwYXRoIGZpbGw9IiM1NUIyRjEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjQ2OCAxMC4zMTJjLS4wMS0uOTU3LS4zOC0xLjQ3Ni0uODA3LTIuMTUzLS4xOTEtLjI4My0uNDEzLS40NzMtLjYwNS0uNzU1LS4wMy0uMTU0LjAzMy0uMjY4LS4wMTItLjY3MS0uMDQyLS42MDQtLjI2My0uODM4LS4zMS0uOTEyLjAyLS4xNi0uMDQzLTEuNDg1LS41MjMtMi4yNjhDMTAuNzUxLjk0MSA3Ljk4Mi44NDYgNy42NDMuODQ0SDcuNjRjLS4zMzkuMDAyLTMuMTA3LjA5Ny00LjU2OCAyLjcxLS40NzkuNzgyLS41NDMgMi4xMDYtLjUyMyAyLjI2Ny0uMDQ2LjA3NC0uMjY3LjMwOC0uMzEuOTEyLS4wNDQuNDAzLjAxOC41MTctLjAxMi42Ny0uMTkyLjI4NC0uNDEzLjQ3My0uNjA1Ljc1Ni0uNDI2LjY3Ny0uNzk3IDEuMTk2LS44MDYgMi4xNTMtLjAwNy43MTQuMTYyIDEuNjg3LjY2MyAxLjcuMTU4LS4wMTIuMjkyLS4xMTcuNTY2LS40MjQuMDgyLS4wOTIuMzctLjQ4LjQyOS0uNTg3LjA1Ni4xNDguMTkgMS4xODMgMS4xMiAxLjcyMy0uOTU2LjQ1LTEuNDI0LjczNS0xLjQ0IDEuMzE5LjAyLjMzOC40MjMuNzg3IDEuMTY1Ljk5NmE2LjA1IDYuMDUgMCAwIDAgMi45MjcuMDVjLjUzNS0uMTMuNjk2LS4yNiAxLjM5Ni0uNjQ0LjcuMzg1Ljg2LjUxNCAxLjM5NS42NDNhNi4wNTIgNi4wNTIgMCAwIDAgMi45MjctLjA0OWMuNzQyLS4yMDkgMS4xNDYtLjY1OCAxLjE2Ni0uOTk2LS4wMTYtLjU4NC0uNDg0LS44Ny0xLjQ0LTEuMzIuOTMtLjUzOCAxLjA2My0xLjU3NCAxLjEyLTEuNzIyLjA1OC4xMDcuMzQ2LjQ5NS40MjguNTg3LjI3NC4zMDcuNDA5LjQxMi41NjcuNDI0LjUtLjAxMy42Ny0uOTg2LjY2My0xLjd6Ii8+Cjwvc3ZnPgo=)}.panel-btn.wechat-btn[data-v-19356a56]{background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/wechat.63e1ce0.svg)}.panel-btn.wechat-btn[data-v-19356a56]:hover{background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/wechat-hover.c8ce019.svg)}.panel-btn.wechat-btn:hover .wechat-qr-code-img[data-v-19356a56]{display:block}.share-title[data-v-19356a56]{margin:2.5rem 0 1rem;font-size:1rem;text-align:center;color:#c6c6c6;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.wechat-qr-code-img[data-v-19356a56]{position:absolute;top:100%;left:50%;width:8rem;height:8rem;margin-top:1rem;border:.5rem solid #fff;transform:translateX(-50%);display:none}
.extension[data-v-7e9c74a6]{position:fixed;bottom:0;left:0;z-index:1000;width:100%;height:180px;cursor:pointer;display:none}.extension[data-v-7e9c74a6]:before{display:flex;width:100%;position:absolute;bottom:0;z-index:0;height:148px;z-index:-1;content:"";background-color:#fff}.extension .link[data-v-7e9c74a6]{width:100%;height:100%;color:#000;background-repeat:no-repeat;background-image:url(//s3.pstatp.com/toutiao/xitu_juejin_web/img/extension.c1307da.png);background-position:bottom;background-size:auto 180px;image-rendering:-webkit-optimize-contrast}.extension .link .price[data-v-7e9c74a6]{margin-left:5px;margin-right:5px;color:#007fff}.extension .link .description[data-v-7e9c74a6],.extension .link .title[data-v-7e9c74a6]{font-size:26px;padding-top:50px;box-sizing:border-box;width:960px;margin:0 auto;padding-left:22px}.extension .link .description[data-v-7e9c74a6]{color:rgba(0,0,0,.7);font-size:13px;padding-top:8px}.extension .ion-close[data-v-7e9c74a6]{position:absolute;top:45px;right:15px;font-size:12px;color:#bbb}.extension .ion-close[data-v-7e9c74a6]:hover{color:#999}.books[data-v-7e9c74a6]{display:none;left:15px;right:15px;position:fixed;bottom:15px;z-index:900}.books.book--mobile[data-v-7e9c74a6]{bottom:55px}.books .book-inner[data-v-7e9c74a6]{width:100%;height:50px;padding-left:15px;padding-right:15px;display:flex;justify-content:center;align-items:center;background:#fd4243;box-sizing:border-box;border-radius:2px;background:linear-gradient(108deg,#f87554,#f0232f);background:-webkit-linear-gradient(-12deg,#f87554,#f0232f)}.books .book-inner .icon[data-v-7e9c74a6]{width:38px}.books .book-inner .icon img[data-v-7e9c74a6]{width:100%;display:block}.books .book-inner .title[data-v-7e9c74a6]{flex-grow:1;padding-left:15px;color:#fff;font-size:15px}.books .book-inner .btn-get[data-v-7e9c74a6]{padding-left:15px;padding-right:15px;height:26px;line-height:26px;border-radius:2px;border:1px solid #fff;color:#fff}@media (max-width:960px){.books[data-v-7e9c74a6]{display:block}}@media (min-width:960px){.extension[data-v-7e9c74a6]{display:block}}</style>
  </head>
  <body >
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div id="juejin"><div class="global-component-box"><!----> <!----> <!----> <!----> <!----> <div class="emoji-barrage" data-v-68506677><!----></div> <!----> <!----> <div class="bind-phone-number-modal-box" data-v-06e234c4><div st:block="bindPhoneNumberModal" class="modal-mask" style="display:none;" data-v-06e234c4 data-v-06e234c4></div> <form class="bind-phone-number-form" style="display:none;" data-v-06e234c4 data-v-06e234c4><i title="关闭" class="close-btn ion-close-round" data-v-06e234c4></i> <h1 class="title" data-v-06e234c4>提示</h1> <h2 class="hint" data-v-06e234c4>根据我国<a href="http://www.cac.gov.cn/2016-11/07/c_1119867116.htm" target="_blank" style="color:#007fff">《网络安全法》</a>，您需要绑定手机号后才可在掘金社区内发布内容。</h2> <div class="input-group" data-v-06e234c4><div class="input-box dropdown-box" data-v-06e234c4><div class="dropdown-input-container" style="width:26%;" data-v-4e5eda86 data-v-06e234c4><div class="dropdown-input-box" data-v-4e5eda86><input autocomplete="off" value="86" data-v-4e5eda86> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDEyIDEyIj4KICAgIDxwYXRoIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYgNy42NTlsMy4xNDYtMy40OTZhLjQ2NS40NjUgMCAwIDEgLjcwOCAwIC42LjYgMCAwIDEgMCAuNzg1bC0zLjUgMy44OWEuNDY1LjQ2NSAwIDAgMS0uNzA4IDBsLTMuNS0zLjg5YS42LjYgMCAwIDEgMC0uNzg1LjQ2NS40NjUgMCAwIDEgLjcwOCAwTDYgNy42NTl6Ii8+Cjwvc3ZnPg==" class="arrow" style="transform:rotate(0deg);" data-v-4e5eda86></div> <div class="dropdown-pannel" style="display:none;" data-v-4e5eda86 data-v-4e5eda86><ul data-v-4e5eda86><li class="item selected" data-v-4e5eda86><span data-v-4e5eda86>中国</span> <span data-v-4e5eda86>+86</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>中国澳门</span> <span data-v-4e5eda86>+853</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>中国台湾</span> <span data-v-4e5eda86>+886</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>中国香港</span> <span data-v-4e5eda86>+852</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿尔巴尼亚</span> <span data-v-4e5eda86>+355</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿尔及利亚</span> <span data-v-4e5eda86>+213</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿富汗</span> <span data-v-4e5eda86>+93</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿根廷</span> <span data-v-4e5eda86>+54</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿拉伯联合酋长国</span> <span data-v-4e5eda86>+971</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿鲁巴岛</span> <span data-v-4e5eda86>+297</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿曼</span> <span data-v-4e5eda86>+968</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿塞拜疆</span> <span data-v-4e5eda86>+994</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>阿森松</span> <span data-v-4e5eda86>+247</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>埃及</span> <span data-v-4e5eda86>+20</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>埃塞俄比亚</span> <span data-v-4e5eda86>+251</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>爱尔兰</span> <span data-v-4e5eda86>+353</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>爱沙尼亚</span> <span data-v-4e5eda86>+372</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>安道尔</span> <span data-v-4e5eda86>+376</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>安哥拉</span> <span data-v-4e5eda86>+244</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>安圭拉</span> <span data-v-4e5eda86>+1264</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>安提瓜和巴布达</span> <span data-v-4e5eda86>+1268</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>奥地利</span> <span data-v-4e5eda86>+43</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>奥兰群岛</span> <span data-v-4e5eda86>+358</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>澳大利亚</span> <span data-v-4e5eda86>+61</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴巴多斯</span> <span data-v-4e5eda86>+1246</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴哈马</span> <span data-v-4e5eda86>+1242</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴基斯坦</span> <span data-v-4e5eda86>+92</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴拉圭</span> <span data-v-4e5eda86>+595</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴勒斯坦</span> <span data-v-4e5eda86>+970</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴林</span> <span data-v-4e5eda86>+973</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴拿马</span> <span data-v-4e5eda86>+507</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>巴西</span> <span data-v-4e5eda86>+55</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>白俄罗斯</span> <span data-v-4e5eda86>+375</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>百慕大</span> <span data-v-4e5eda86>+1441</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>保加利亚</span> <span data-v-4e5eda86>+359</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>北马里亚纳群岛</span> <span data-v-4e5eda86>+1670</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>贝宁</span> <span data-v-4e5eda86>+229</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>比利时</span> <span data-v-4e5eda86>+32</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>冰岛</span> <span data-v-4e5eda86>+354</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>波多黎各</span> <span data-v-4e5eda86>+1787</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>波黑</span> <span data-v-4e5eda86>+387</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>波兰</span> <span data-v-4e5eda86>+48</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>玻利维亚</span> <span data-v-4e5eda86>+591</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>伯利兹</span> <span data-v-4e5eda86>+501</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>博茨瓦纳</span> <span data-v-4e5eda86>+267</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>不丹</span> <span data-v-4e5eda86>+975</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>布基拉法索</span> <span data-v-4e5eda86>+226</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>布隆迪</span> <span data-v-4e5eda86>+257</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>朝鲜</span> <span data-v-4e5eda86>+850</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>赤道几内亚</span> <span data-v-4e5eda86>+240</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>丹麦</span> <span data-v-4e5eda86>+45</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>德国</span> <span data-v-4e5eda86>+49</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>多哥</span> <span data-v-4e5eda86>+228</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>多米尼加共和国</span> <span data-v-4e5eda86>+1809</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>多米尼克</span> <span data-v-4e5eda86>+1767</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>俄罗斯</span> <span data-v-4e5eda86>+7</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>厄瓜多尔</span> <span data-v-4e5eda86>+593</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>厄立特里亚</span> <span data-v-4e5eda86>+291</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>法国</span> <span data-v-4e5eda86>+33</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>法罗群岛</span> <span data-v-4e5eda86>+298</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>法属波利尼西亚</span> <span data-v-4e5eda86>+689</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>法属圭亚那</span> <span data-v-4e5eda86>+594</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>梵蒂冈</span> <span data-v-4e5eda86>+379</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>菲律宾</span> <span data-v-4e5eda86>+63</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>斐济</span> <span data-v-4e5eda86>+679</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>芬兰</span> <span data-v-4e5eda86>+358</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>佛得角</span> <span data-v-4e5eda86>+238</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>冈比亚</span> <span data-v-4e5eda86>+220</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>刚果</span> <span data-v-4e5eda86>+242</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>刚果民主共和国</span> <span data-v-4e5eda86>+243</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>哥伦比亚</span> <span data-v-4e5eda86>+57</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>哥斯达黎加</span> <span data-v-4e5eda86>+506</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>格林纳达</span> <span data-v-4e5eda86>+1473</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>格陵兰岛</span> <span data-v-4e5eda86>+299</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>格鲁吉亚</span> <span data-v-4e5eda86>+995</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>瓜德罗普</span> <span data-v-4e5eda86>+590</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>关岛</span> <span data-v-4e5eda86>+1671</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圭亚那</span> <span data-v-4e5eda86>+592</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>海地</span> <span data-v-4e5eda86>+509</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>韩国</span> <span data-v-4e5eda86>+82</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>荷兰</span> <span data-v-4e5eda86>+31</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>荷属安的列斯</span> <span data-v-4e5eda86>+599</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>洪都拉斯</span> <span data-v-4e5eda86>+504</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>吉布提</span> <span data-v-4e5eda86>+253</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>加拿大</span> <span data-v-4e5eda86>+1</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>吉尔吉斯斯坦</span> <span data-v-4e5eda86>+996</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>几内亚</span> <span data-v-4e5eda86>+224</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>加那利群岛</span> <span data-v-4e5eda86>+3491</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>加纳</span> <span data-v-4e5eda86>+233</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>加蓬</span> <span data-v-4e5eda86>+241</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>柬埔寨</span> <span data-v-4e5eda86>+855</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>捷克</span> <span data-v-4e5eda86>+420</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>喀麦隆</span> <span data-v-4e5eda86>+237</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>卡塔尔</span> <span data-v-4e5eda86>+974</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>开曼群岛</span> <span data-v-4e5eda86>+1345</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>科摩罗</span> <span data-v-4e5eda86>+269</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>科索沃</span> <span data-v-4e5eda86>+883</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>科特迪瓦</span> <span data-v-4e5eda86>+225</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>科威特</span> <span data-v-4e5eda86>+965</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>克罗地亚</span> <span data-v-4e5eda86>+385</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>肯尼亚</span> <span data-v-4e5eda86>+254</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>拉脱维亚</span> <span data-v-4e5eda86>+371</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>莱索托</span> <span data-v-4e5eda86>+266</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>老挝</span> <span data-v-4e5eda86>+856</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>黎巴嫩</span> <span data-v-4e5eda86>+961</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>立陶宛</span> <span data-v-4e5eda86>+370</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>利比里亚</span> <span data-v-4e5eda86>+231</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>利比亚</span> <span data-v-4e5eda86>+218</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>列支敦士登</span> <span data-v-4e5eda86>+423</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>留尼旺岛</span> <span data-v-4e5eda86>+262</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>卢森堡</span> <span data-v-4e5eda86>+352</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>卢旺达</span> <span data-v-4e5eda86>+250</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>罗马尼亚</span> <span data-v-4e5eda86>+40</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马达加斯加</span> <span data-v-4e5eda86>+261</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马尔代夫</span> <span data-v-4e5eda86>+960</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马耳他</span> <span data-v-4e5eda86>+356</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马拉维</span> <span data-v-4e5eda86>+265</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马来西亚</span> <span data-v-4e5eda86>+60</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马里</span> <span data-v-4e5eda86>+223</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马其顿</span> <span data-v-4e5eda86>+389</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马绍尔群岛</span> <span data-v-4e5eda86>+692</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马提尼克</span> <span data-v-4e5eda86>+596</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>马约特</span> <span data-v-4e5eda86>+262</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>毛里求斯</span> <span data-v-4e5eda86>+230</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>毛里塔尼亚</span> <span data-v-4e5eda86>+222</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>美国</span> <span data-v-4e5eda86>+1</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>美属萨摩亚</span> <span data-v-4e5eda86>+1684</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>美属维尔京群岛</span> <span data-v-4e5eda86>+1340</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>蒙古</span> <span data-v-4e5eda86>+976</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>蒙塞拉特岛</span> <span data-v-4e5eda86>+1664</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>蒙特內哥羅</span> <span data-v-4e5eda86>+382</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>孟加拉国</span> <span data-v-4e5eda86>+880</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>秘鲁</span> <span data-v-4e5eda86>+51</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>密克罗尼西亚联邦</span> <span data-v-4e5eda86>+691</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>缅甸</span> <span data-v-4e5eda86>+95</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>摩尔多瓦</span> <span data-v-4e5eda86>+373</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>摩洛哥</span> <span data-v-4e5eda86>+212</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>摩纳哥</span> <span data-v-4e5eda86>+377</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>莫桑比克</span> <span data-v-4e5eda86>+258</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>墨西哥</span> <span data-v-4e5eda86>+52</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>纳米比亚</span> <span data-v-4e5eda86>+264</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>南非</span> <span data-v-4e5eda86>+27</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>尼泊尔</span> <span data-v-4e5eda86>+977</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>尼加拉瓜</span> <span data-v-4e5eda86>+505</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>尼日尔</span> <span data-v-4e5eda86>+227</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>尼日利亚</span> <span data-v-4e5eda86>+234</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>挪威</span> <span data-v-4e5eda86>+47</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>帕劳</span> <span data-v-4e5eda86>+680</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>葡萄牙</span> <span data-v-4e5eda86>+351</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>千里达及托巴哥</span> <span data-v-4e5eda86>+1868</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>日本</span> <span data-v-4e5eda86>+81</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>瑞典</span> <span data-v-4e5eda86>+46</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>瑞士</span> <span data-v-4e5eda86>+41</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣诞岛</span> <span data-v-4e5eda86>+61</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣基茨和尼维斯</span> <span data-v-4e5eda86>+1869</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣卢西亚</span> <span data-v-4e5eda86>+1758</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣马力诺</span> <span data-v-4e5eda86>+223</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣马力诺</span> <span data-v-4e5eda86>+378</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣皮埃尔和密克隆群岛</span> <span data-v-4e5eda86>+508</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>圣文森特和格林纳丁斯</span> <span data-v-4e5eda86>+1784</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>斯里兰卡</span> <span data-v-4e5eda86>+94</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>斯洛伐克</span> <span data-v-4e5eda86>+421</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>斯洛文尼亚</span> <span data-v-4e5eda86>+386</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>斯威士兰</span> <span data-v-4e5eda86>+268</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>苏丹</span> <span data-v-4e5eda86>+249</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>苏里南</span> <span data-v-4e5eda86>+597</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>索马里</span> <span data-v-4e5eda86>+252</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塔吉克斯坦</span> <span data-v-4e5eda86>+992</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>沙特阿拉伯</span> <span data-v-4e5eda86>+966</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塞舌尔</span> <span data-v-4e5eda86>+248</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塞浦路斯</span> <span data-v-4e5eda86>+357</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塞内加尔</span> <span data-v-4e5eda86>+221</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塞拉利昂</span> <span data-v-4e5eda86>+232</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>塞尔维亚</span> <span data-v-4e5eda86>+381</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>萨尔瓦多</span> <span data-v-4e5eda86>+503</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>萨尔瓦多</span> <span data-v-4e5eda86>+503</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>汤加</span> <span data-v-4e5eda86>+676</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>坦桑尼亚</span> <span data-v-4e5eda86>+255</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>泰国</span> <span data-v-4e5eda86>+66</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>特克斯和凯科斯群岛</span> <span data-v-4e5eda86>+1649</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>突尼斯</span> <span data-v-4e5eda86>+216</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>图瓦卢</span> <span data-v-4e5eda86>+688</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>土耳其</span> <span data-v-4e5eda86>+90</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>土库曼斯坦</span> <span data-v-4e5eda86>+993</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>乌兹别克斯坦</span> <span data-v-4e5eda86>+998</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>乌拉圭</span> <span data-v-4e5eda86>+598</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>乌克兰</span> <span data-v-4e5eda86>+380</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>乌干达</span> <span data-v-4e5eda86>+256</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>文莱</span> <span data-v-4e5eda86>+673</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>委内瑞拉</span> <span data-v-4e5eda86>+58</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>危地马拉</span> <span data-v-4e5eda86>+502</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>叙利亚</span> <span data-v-4e5eda86>+963</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>匈牙利</span> <span data-v-4e5eda86>+36</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>新西兰</span> <span data-v-4e5eda86>+64</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>新喀里多尼亚</span> <span data-v-4e5eda86>+687</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>新加坡</span> <span data-v-4e5eda86>+65</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>希腊</span> <span data-v-4e5eda86>+30</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>西萨摩亚</span> <span data-v-4e5eda86>+685</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>西撒哈拉</span> <span data-v-4e5eda86>+212</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>西班牙</span> <span data-v-4e5eda86>+34</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>越南</span> <span data-v-4e5eda86>+84</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>约旦</span> <span data-v-4e5eda86>+962</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>英属维尔京群岛</span> <span data-v-4e5eda86>+1284</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>英国</span> <span data-v-4e5eda86>+44</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>印度尼西亚</span> <span data-v-4e5eda86>+62</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>印度</span> <span data-v-4e5eda86>+91</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>意大利</span> <span data-v-4e5eda86>+39</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>以色列</span> <span data-v-4e5eda86>+972</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>伊朗</span> <span data-v-4e5eda86>+98</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>伊拉克</span> <span data-v-4e5eda86>+964</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>也门</span> <span data-v-4e5eda86>+967</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>亚美尼亚</span> <span data-v-4e5eda86>+374</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>牙买加</span> <span data-v-4e5eda86>+1876</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>中非</span> <span data-v-4e5eda86>+236</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>智利</span> <span data-v-4e5eda86>+56</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>直布罗陀</span> <span data-v-4e5eda86>+350</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>乍得</span> <span data-v-4e5eda86>+235</span></li><li class="item" data-v-4e5eda86><span data-v-4e5eda86>赞比亚</span> <span data-v-4e5eda86>+260</span></li></ul></div></div> <input maxlength="11" placeholder="请输入要绑定的手机号码" value="" class="input number-input" data-v-06e234c4></div> <div class="input-box vcode-box" data-v-06e234c4></div> <div class="input-box" data-v-06e234c4><input maxlength="4" placeholder="验证码" value="" class="input" data-v-06e234c4> <button class="send-vcode-btn" data-v-06e234c4>
            获取验证码
          </button></div></div> <button st:name="bindBtn" class="btn" data-v-06e234c4>
        绑定手机
      </button></form></div> <!----></div> <!----> <div class="view-container" data-v-6a3e47cf data-v-064b8453><div class="main-header-box" data-v-6a3e47cf><header class="main-header main-header unauthorized visible" data-v-6f082a2c data-v-6a3e47cf><div class="container" data-v-6f082a2c><a href="/" class="logo" data-v-6f082a2c><img src="//s3.pstatp.com/toutiao/xitu_juejin_web/img/logo.a7995ad.svg" alt="掘金" class="logo-img" data-v-6f082a2c> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQ1cHgiIGhlaWdodD0iMzhweCIgdmlld0JveD0iMCAwIDQ1IDM4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPkp1ZWppbjwvdGl0bGU+CiAgICA8ZGVzYz5KdWVqaW4uaW08L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iMC4xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCA1LjAwMDAwMCkiIGZpbGw9IiMwMDZDRkYiPgogICAgICAgICAgICA8cGF0aCBkPSJNMjEuMjkzNDMyOCwyLjU4MzEzMDQ5IEwxOC4wMTczOTg0LDAgTDE0LjU5NDYyNCwyLjY5ODg3ODAxIEwxNC40MTcyMDc3LDIuODQxODIzMDQgTDE4LjAxNzM5ODQsNS43MTI0MjQ4MyBMMjEuNjI4NjU3OCwyLjg0MTgyMzA0IEwyMS4yOTM0MzI4LDIuNTgzMTMwNDkgWiBNMzMuNzA3ODI4OSwxMi42MDA2Njc0IEwxOC4wMDc5MTA5LDI0Ljk4MDI3NiBMMi4zMTc0ODA0NCwxMi42MDgyNTc0IEwwLDE0LjQ2OTcwNTIgTDE4LjAwNzkxMDksMjguNjY5MDE2NyBMMzYuMDI1NjI1NiwxNC40NjIxMTUyIEwzMy43MDc4Mjg5LDEyLjYwMDY2NzQgWiBNMTguMDA3OTEwOSwxMy42MDUwNzc2IEw5LjQ2NDQxNTU0LDYuODY4NjM1MDUgTDcuMTQ2NjE4ODUsOC43MzAwODI5IEwxOC4wMDc5MTA5LDE3LjI5NDEzNDUgTDI4Ljg3ODM3NDIsOC43MjI0OTI5IEwyNi41NjA1Nzc1LDYuODYxMDQ1MDUgTDE4LjAwNzkxMDksMTMuNjA1MDc3NiBaIiBpZD0iRmlsbC0xLUNvcHkiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==" alt="掘金" class="mobile" data-v-6f082a2c></a> <nav role="navigation" class="main-nav" data-v-6f082a2c><ul class="nav-list" data-v-6f082a2c><li class="main-nav-list" data-v-6f082a2c><div class="phone-show-menu" data-v-6f082a2c><span data-v-6f082a2c>首页</span> <div class="icon ion-arrow-down-b" data-v-6f082a2c></div></div> <ul class="phone-hide" data-v-6f082a2c><li class="nav-item link-item route-active" data-v-6f082a2c><a href="/" data-v-6f082a2c>首页</a></li> <li class="nav-item link-item activities" data-v-6f082a2c><a href="/pins" data-v-6f082a2c>沸点</a></li> <li class="nav-item link-item" data-v-6f082a2c><a href="/topics" data-v-6f082a2c>话题</a></li> <li class="nav-item link-item book" data-v-6f082a2c><a href="/books" data-v-6f082a2c>小册</a></li> <li class="nav-item link-item" data-v-6f082a2c><a href="/events/all" data-v-6f082a2c>活动</a></li> <li class="nav-item link-item" data-v-6f082a2c><a href="/academy" data-v-6f082a2c>字学</a></li></ul></li> <li class="nav-item search" data-v-6f082a2c><form role="search" class="search-form" data-v-6f082a2c><input type="search" maxlength="32" placeholder="探索掘金" value="" class="search-input" data-v-6f082a2c> <img src="//s3.pstatp.com/toutiao/xitu_juejin_web/img/juejin-search-icon.6f8ba1b.svg" alt="搜索" class="search-icon" data-v-6f082a2c></form></li> <li class="nav-item add" data-v-6f082a2c><div class="add-group" data-v-6f082a2c><button class="add-btn" data-v-6f082a2c>写文章</button> <div class="more" data-v-6f082a2c><i class="more-icon ion-android-arrow-dropdown" data-v-6f082a2c></i></div> <ul class="more-list" data-v-6f082a2c><li class="item" data-v-6f082a2c>发布沸点</li> <!----></ul></div> <!----></li> <!----> <!----> <li class="nav-item auth" data-v-6f082a2c><button class="login-button" data-v-6f082a2c>登录</button></li></ul></nav></div></header></div>  <main class="container main-container" style="max-width:;" data-v-6a3e47cf><div class="view column-view" data-v-6a3e47cf data-v-064b8453><div class="main-area article-area shadow" data-v-6a3e47cf data-v-064b8453><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="6894541668343775239" data-draft-id="6894501065270984718" class="article" data-v-064b8453><!----> <meta itemprop="headline" content="一文教你认清FastDFS及生产环境的搭建"> <meta itemprop="keywords" content="分布式"> <meta itemprop="datePublished" content="2020-11-13T09:43:12.000Z"> <meta itemprop="image" content="https://b-gold-cdn.xitu.io/icon/icon-128.png"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aleyson爱逼逼"> <meta itemprop="url" content="https://juejin.im/user/2726421782335303"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://b-gold-cdn.xitu.io/icon/icon-white-180.png"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <div class="author-info-block" data-v-064b8453><a href="/user/2726421782335303" target="_blank" rel="" class="avatar-link" data-v-064b8453><div data-src="https://sf3-ttcdn-tos.pstatp.com/img/user-avatar/ef6936e3e35653416695d20515af72a1~300x300.image" class="lazy avatar avatar" style="background-image:none;" data-v-47cc2604 data-v-1c418ef0 data-v-064b8453></div></a> <div class="author-info-box" data-v-064b8453><!----> <div class="meta-box" data-v-064b8453><time datetime="2020-11-13T09:43:12.000Z" title="Fri Nov 13 2020 17:43:12 GMT+0800 (China Standard Time)" class="time" data-v-064b8453>
                  2020年11月13日
                </time> <span class="views-count" data-v-064b8453>阅读 348</span> <!----></div></div> <button class="follow-button follow" data-v-06c7d5b3 data-v-064b8453><span data-v-06c7d5b3>关注</span></button></div> <!----> <h1 class="article-title" data-v-064b8453><!---->
            一文教你认清FastDFS及生产环境的搭建
          </h1> <div itemprop="articleBody" class="article-content" data-v-064b8453><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><h4 data-id="heading-0">FastDFS简介</h4>
<blockquote>
<p>fdfs是一款有c语言开发的高性能文件服务器，专门存储中小型文件（互联网），特别适合以文件为载体的应用，支持在线扩容、冗余备份、负载均衡等功能。使用fastdfs很容易搭建 一套高性能的文件服务器集群提供文件的上传和下载服务。</p>
</blockquote>
<h4 data-id="heading-1">与其他文件系统的对比</h4>





















































































































<table><thead><tr><th>指标</th><th>适合类型</th><th>文件分布</th><th>系统性能</th><th>复杂度</th><th>FUSE</th><th>POSIX</th><th>备份机制</th><th>通讯协议接口</th><th>社区支持</th><th>去重</th><th>开发语言</th></tr></thead><tbody><tr><td>FastDFS</td><td>4KB~500MB</td><td>小文件合并存储不分片处理</td><td>很高</td><td>简单</td><td>不支持</td><td>不支持</td><td>组内冗余备份</td><td>ApiHTTP</td><td>国内用户群</td><td></td><td>C语言</td></tr><tr><td>TFS</td><td>所有文件</td><td>小文件合并，以block组织分片</td><td></td><td>复杂</td><td>不支持</td><td>不支持</td><td>Block存储多份,主辅灾备</td><td>APIhttp</td><td>少</td><td></td><td>C++</td></tr><tr><td>MFS</td><td>大于64K</td><td>分片存储</td><td>Master占内存多</td><td></td><td>支持</td><td>支持</td><td>多点备份动态冗余</td><td>使用fuse挂在</td><td>较多</td><td></td><td>Perl</td></tr><tr><td>HDFS</td><td>大文件</td><td>大文件分片分块存储</td><td></td><td>简单</td><td>支持</td><td>支持</td><td>多副本</td><td>原生api</td><td>较多</td><td></td><td>java</td></tr><tr><td>Ceph</td><td>对象文件块</td><td>OSD一主多从</td><td></td><td>复杂</td><td>支持</td><td>支持</td><td>多副本</td><td>原生api</td><td>较少</td><td></td><td>C++</td></tr><tr><td>MogileFS</td><td>海量小图片</td><td></td><td>高</td><td>复杂</td><td>可以支持</td><td>不支持</td><td>动态冗余</td><td>原生api</td><td>文档少</td><td></td><td>Perl</td></tr><tr><td>ClusterFS</td><td>大文件</td><td></td><td></td><td>简单</td><td>支持</td><td>支持</td><td>镜像</td><td></td><td>多</td><td></td><td>C</td></tr></tbody></table>
<h4 data-id="heading-2">为什么要使用第三方文件系统</h4>
<blockquote>
<p>背景：以我参加工作第一家公司举例，该公司做Saas餐饮、零售软件，初期为互联网单体应用</p>
</blockquote>
<ol>
<li>初期：“产品图片直接存在war包或者jar包里，用户图片存储在服务器的某个文件目录下。使用nginx代理获取和访问图片。</li>
<li>中期：伴随着业务的复杂度越来越高，用户量越来越大，但从文件存储这块来说，当前架构已经不像初期那样游刃有余；产品图片越来越多，war包或jar包越来越重，文件越来越多，资源消耗过高，性能越来越差，单点故障不可恢复；这时我们考虑升级到集群架构。</li>
<li>中后期：集群架构模式下，这样拥有了备份冗余，避免了单点故障，但是由于集群架构下，文件需要同步到集群中的每台机器，极大的浪费了I/O资源，性能也是比较差的；而且还得同步老文件。这时，我们考虑使用第三方文件服务器。</li>
<li>后期：集群架构下使用第三方服务器，也就是我们今天讲到的Fastdfs+nginx；这种模式下，减轻了业务服务器的压力。同时，也解决了单点故障和I/O资源的浪费。</li>
</ol>
<h4 data-id="heading-3">fastdfs架构</h4>
<p><img alt="Aleyson爱逼逼" class="lazyload" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4787f9758a624935b95cb06bffedb343~tplv-k3u1fbpfcp-watermark.image" data-width="800" data-height="600"></p>
<h4 data-id="heading-4">fastdfs原理</h4>
<h5 data-id="heading-5"><strong>Tracker</strong></h5>
<ul>
<li>追踪服务器负责接收客户端的请求，负载均衡。调度合适的组别storage，tracker和storage之间也会用心跳机制来检测对方是否存活。</li>
<li>tracker需要管理的信息（分组信息和storage的状态等）也都放在内存中，每个tracker都是无状态的，对等的，很容易扩展。</li>
<li>客户端访问tracker集群的时候会随机分配一个tracker来和客户端进行交互。</li>
</ul>
<h5 data-id="heading-6"><strong>Storage</strong></h5>
<ul>
<li>存储服务器是实际存储文件的的地方，分成若干个group，同一group下数据冗余复制，提高了可用性。
<ul>
<li>同组策略：
<ul>
<li>同组服务器数据是一样的</li>
<li>同组服务器数据要相互备份，服务器容量大小必须一致</li>
<li>同组之间服务器同步是在后台完成</li>
<li>同组集群：冗余备份，负载均衡（空间换时间）</li>
</ul>
</li>
<li>不同组策略：
<ul>
<li>组合组之间的文件是不相同的</li>
<li>整个组之间的容量集合就是整个文件系统的文件</li>
<li>分组就是文件系统的扩容</li>
</ul>
</li>
</ul>
</li>
<li>而tracker实际上就是管理storage中的组，group可以隔离不同应用的数据。</li>
<li>文件的访问需要storage端集成nginx。</li>
<li>对文件的处理需要对文件内容做hash处理，避免出现重复的文件。</li>
</ul>
<h5 data-id="heading-7"><strong>Client</strong></h5>
<p>每台机器上都有客户端，供用户进行测试使用或上传下载文件使用的服务器。</p>
<p><img alt="Aleyson爱逼逼" class="lazyload" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bfdb962bb6f4fb99171f5e18f91a48d~tplv-k3u1fbpfcp-watermark.image" data-width="800" data-height="600"></p>
<h5 data-id="heading-8">同步机制</h5>
<h6 data-id="heading-9">tracker server</h6>
<blockquote>
<p>tracker server会在内存中保存storage中的分组信息以及storage server信息，并会将自己已知的storage server及分组信息持久化到本地文件中，以便于重启服务的时候从本地文件恢复该类信息。</p>
</blockquote>
<ol>
<li>
<p>当一个分组新增一个 storage server 或者 storage server 状态更改</p>
<p>tracker server 都会将已知的 storage server 列表同步给该组下的所有 storage server。</p>
<p>例如：新增一个 storage server ，该 storage server 连接 tracker server ，tracker server 会将新增的 storage server 加入列表并同步给该组下的所有 storage server（包括新增加的 storage server）。</p>
</li>
<li>
<p>当新增一台tracker server</p>
<p>storage server 会连接 tracker server，tracker server 返回该组下的列表，发现 tracker server 返回的列表比自己已知的还要少，就会将自己的列表给 tracker server 更新。</p>
</li>
</ol>
<h6 data-id="heading-10">storage server 同步状态</h6>
<ul>
<li>FDFS_STORAGE_STATUS_INIT   				初始化，未得到同步源服务器</li>
<li>FDFS_STORAGE_STATUS_WAIT_SYNC     等待同步</li>
<li>FDFS_STORAGE_STATUS_SYNCING         同步中</li>
<li>FDFS_STORAGE_STATUS_DELETED         删除</li>
<li>FDFS_STORAGE_STATUS_OFFLINE           离线</li>
<li>FDFS_STORAGE_STATUS_ONLINE             在线，尚不能提供服务</li>
<li>FDFS_STORAGE_STATUS_ACTIVE             在线，可以提供服务</li>
</ul>
<h6 data-id="heading-11">storage server</h6>
<blockquote>
<p>storage server 会在内存中保存本组所有的服务信息，并持久化到本地文件中。同一组内的 storage server 是对等的，新增和删除操作可以在该组内的任一一台 storage server 上进行，文件同步只在组内进行，并且采用 push 的方式。</p>
</blockquote>
<ol>
<li>同步规则
<ol>
<li>只有本组内的 storage server 之间需要同步</li>
<li>源头数据需要同步，备份数据不需要同步</li>
<li>新增 storage server 时，将该组内已知的一台 storage server 的源数据和备份数据全部同步给新增的 storage server</li>
</ol>
</li>
<li>逻辑处理
<ol>
<li>当 storage server 的状态为 FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务）时，当该 storage server 向 tracker server 发送一次心跳时， tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）</li>
<li>当组内新增一台 storage server 时
<ol>
<li>storage server 连接 tracker server ， tracker server 会将其状态更改为 FDFS_STORAGE_STATUS_INIT（初始化，未得到同步源服务器）</li>
<li>此时，storage server 会询问追加同步的源服务器和追加同步的截止时间戳，如果当前组内只有新增的 storage server 或者存在的文件数为0，则不需要同步数据，此时 tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务），等到 storage server 向 tracker server 发起心跳时，tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）；如果有数据需要同步，此时 tracker server 会将其状态更改为 FDFS_STORAGE_STATUS_WAIT_SYNC（等待同步）。</li>
<li>当 tracker server 向 storage server 分配一个同步已有数据的源服务器。同组的 storage server 与  tracker server 通信后，知道了新增了一个 storage server ，将启动同步线程，并向 tracker server 获取需要同步的源服务器和同步截止时间戳，此时， tracker server 会将  storage server 的状态更改为 FDFS_STORAGE_STATUS_SYNCING（同步中），源服务器将需要同步的数据同步给 storage server ，其余的组内服务器会在同步截止时间戳正常同步数据给  storage server ，并且只同步源头数据。</li>
<li>待源服务器将数据同步给  storage server 完成后，会请求  tracker server 将 storage server 的状态更改为 FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务），等到 storage server 向 tracker server 发起心跳时，tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）</li>
</ol>
</li>
</ol>
</li>
</ol>
<h5 data-id="heading-12"><strong>文件上传</strong></h5>
<p><img alt="Aleyson爱逼逼" class="lazyload" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/effc335dd31a483586a935510b9841fa~tplv-k3u1fbpfcp-watermark.image" data-width="800" data-height="600"></p>
<h5 data-id="heading-13"><strong>文件名</strong></h5>
<ul>
<li>当文件上传成功后，会为该文件生成一个文件名：group+存储目录+两级子目录+文件名+文件后缀名（客户端指定，用于区分文件类型）。</li>
</ul>
<p><img alt="Aleyson爱逼逼" class="lazyload" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8f8bd4017464ecbb0d5fce638feca48~tplv-k3u1fbpfcp-watermark.image" data-width="800" data-height="600"></p>
<ol>
<li>group1：组名，因为storage要分组，故这一级表名文件存储在哪一个storage中</li>
<li>M00：虚拟磁盘的路径（这个是在storage配置文件中指定的，见下）
<ol>
<li>store_path0=/data/fastdfs/storage ============== M00</li>
<li>store_path1=/home/yuqing/fastdfs2 ============ M01</li>
</ol>
</li>
<li>00/0C：目录有16 * 16 * 16 * 16 = 2^16</li>
<li>文件名：文件名由：源服务器IP+文件创建时间+文件大小+文件crc32+随机数 组成。其是对前者进行了Base64编码。</li>
</ol>
<h5 data-id="heading-14"><strong>文件下载</strong></h5>
<p><img alt="Aleyson爱逼逼" class="lazyload" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70f9d4169d50404187102c9a02c148f6~tplv-k3u1fbpfcp-watermark.image" data-width="800" data-height="600"></p>
<h4 data-id="heading-15">单机安装fastdfs</h4>
<pre><code class="hljs language-shell copyable" lang="shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## FastDFS安装 start ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">机器需求</span>
Tracker Server：192.168.198.135 
Storage Server：192.168.198.136、192.168.198.137 
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">######################### 三台机器都需要安装</span></span>
<span class="hljs-meta">#</span><span class="bash">全部依赖环境安装 </span>
yum -y install zlib zlib-devel pcre pcre-devel gcc gcc-c++ openssl openssl-devel libevent libevent-devel perl unzip net-tools wget
<span class="hljs-meta">
#</span><span class="bash">下载 libfastcommon 包</span>
wget https://github.com/happyfish100/libfastcommon/archive/V1.0.39.tar.gz
<span class="hljs-meta">
#</span><span class="bash">解压 libfastcommon 包</span>
tar -zxvf  V1.0.39.tar.gz
<span class="hljs-meta">
#</span><span class="bash">安装 libfastcommon 包</span>
cd libfastcommon-1.0.39 
./make.sh &#x26;&#x26; ./make.sh  install
<span class="hljs-meta">
#</span><span class="bash">拷贝 libfastcommon.so 文件至 /usr/lib 目录（新版本不需要此步）</span>
cp  /usr/lib64/libfastcommon.so  /usr/lib/
<span class="hljs-meta">
#</span><span class="bash">下载 fastdfs 源码包</span>
wget https://github.com/happyfish100/fastdfs/archive/V5.11.tar.gz
<span class="hljs-meta">
#</span><span class="bash">解压 fastdfs 源码包</span>
tar -zxvf  V5.11.tar.gz
<span class="hljs-meta">
#</span><span class="bash">安装 fastdfs 源码包</span>
cd fastdfs-5.11
./make.sh &#x26;&#x26; ./make.sh install
<span class="hljs-meta">
#</span><span class="bash">拷贝/root/fastdfs-5.11/conf目录下的文件到/etc/fdfs目录下</span>
cp /data/soft/fastdfs-5.11/conf/* /etc/fdfs
<span class="hljs-meta">
#</span><span class="bash">关闭并禁用防火墙</span>
systemctl stop firewalld
systemctl disable firewalld
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">######################### tracker server配置</span></span>
<span class="hljs-meta">#</span><span class="bash">修改/etc/fdfs/tracker.conf</span>
vim /etc/fdfs/tracker.conf

base_path=/data/server/fastdfs/tracker 
<span class="hljs-meta">
#</span><span class="bash">创建tracker服务器上面的目录</span>
mkdir /data/server/fastdfs/tracker -p
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">######################### storage server配置</span></span>
<span class="hljs-meta">#</span><span class="bash">修改/etc/fdfs/storage.conf</span>
vim /etc/fdfs/storage.conf
<span class="hljs-meta">
#</span><span class="bash">指定storage的组名 </span>
group_name=group1 
base_path=/data/server/fastdfs/storage 
store_path0=/data/server/fastdfs/storage #M00虚拟磁盘路径 
<span class="hljs-meta">#</span><span class="bash">如果有多个挂载磁盘则定义多个store_path，如下 </span>
<span class="hljs-meta">#</span><span class="bash">store_path1=..... </span>
<span class="hljs-meta">#</span><span class="bash">store_path2=...... </span>
<span class="hljs-meta">#</span><span class="bash">配置tracker服务器IP和端口 </span>
tracker_Server=192.168.198.135:22122   
<span class="hljs-meta">#</span><span class="bash">如果有多个则配置多个tracker </span>
<span class="hljs-meta">#</span><span class="bash">tracker_Server=192.168.101.4:22122</span>
<span class="hljs-meta">
#</span><span class="bash">创建storage服务器上面的目录</span>
mkdir /data/server/fastdfs/storage -p
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## FastDFS安装 end ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">创建软连接</span>
ln -s /usr/bin/fdfs_trackerd /usr/local/bin
ln -s /usr/bin/fdfs_storaged /usr/local/bin
<span class="hljs-meta">
#</span><span class="bash">Tracker 启动命令 </span>
fdfs_trackerd /etc/fdfs/tracker.conf
<span class="hljs-meta">
#</span><span class="bash">Storage 启动命令 </span>
fdfs_storaged /etc/fdfs/storage.conf
<span class="hljs-meta">
#</span><span class="bash">集群状态检查命令 </span>
fdfs_monitor /etc/fdfs/storage.conf
<span class="hljs-meta">
#</span><span class="bash">删除 Storage </span>
fdfs_monitor /etc/fdfs/storage.conf delete 组名 storage的ip
<span class="hljs-meta">
#</span><span class="bash">Tracker 关闭命令 </span>
killall fdfs_trackerd
<span class="hljs-meta">
#</span><span class="bash">Storage 关闭命令 </span>
killall fdfs_storaged
<span class="hljs-meta">
#</span><span class="bash">缺少 killall 命令进行安装 </span>
yum install psmisc -y
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">######################### 配置开机自启动</span></span>
vim /etc/rc.d/rc.local

fdfs_trackerd /etc/fdfs/tracker.conf
fdfs_storaged /etc/fdfs/storage.conf
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">######################### 图片上传测试</span></span>
<span class="hljs-meta">#</span><span class="bash">修改client.conf</span>
vim /etc/fdfs/client.conf

base_path=/data/server/fastdfs/client 
tracker_Server=192.168.198.135:22122
<span class="hljs-meta">
#</span><span class="bash">创建 client 的数据目录</span>
mkdir -p /data/server/fastdfs/client
<span class="hljs-meta">
#</span><span class="bash">使用 ==fdfs_test== 命令将/home下的tomcat.png上传到FastDFS中</span>
/usr/bin/fdfs_test  /etc/fdfs/client.conf  upload  /etc/fdfs/anti-steal.jpg 

http://192.168.198.136/group1/M00/00/00/wKhlBVVY2M-AM_9DAAAT7-0xdqM485_big.png 就是文件的访问路径
/home/fastdfs/fdfs_storage/data/00/00/wKhlBVVY2M-AM_9DAAAT7-0xdqM485_big.png 就是storage服务器上磁盘路径
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-16">tracker配置文件详解</h4>
<pre><code class="hljs language-shell copyable" lang="shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf 基本配置 start ###########################</span></span>
disable #func：配置是否生效 #valu：true、false
disable=false 

bind_addr #func：绑定IP #valu：IP地址 
bind_addr=192.168.6.102 

port #func：服务端口 #valu：端口整数值 
port=22122 

connect_timeout #func：连接超时 #valu：秒单位正整数值 
connect_timeout=30 

network_timeout #func：网络超时 #valu：秒单位正整数值 
network_timeout=60 

base_path #func：Tracker数据/日志目录地址 #valu：路径 
base_path=/home/michael/fdfs/base4tracker 

max_connections #func：大连接数 #valu：正整数值 
max_connections=256 

work_threads #func：线程数，通常设置CPU数 #valu：正整数值
work_threads=4 

store_lookup #func：上传文件的选组方式。 #valu：0、1或2。 # 0：表示轮询 # 1：表示指定组 # 2：表示存储负载均衡（选择剩余空间大的组） 
store_lookup=2 

store_group #func：指定上传的组，如果在应用层指定了具体的组，那么这个参数将不会起效。另外如果store_lookup如果是0或2，则 此参数无效。 #valu：group1等 
store_group=group1 

store_Server #func：上传服务器的选择方式。(一个文件被上传后，这个storage Server就相当于这个文件的storage Server源，会 对同组的storage Server推送这个文件达到同步效果) #valu：0、1或2 # 0: 轮询方式（默认） # 1: 根据ip 地址进行排序选择第一个服务器（IP地址小者） # 2: 根据优先级进行排序（上传优先级由storage Server来设置，参数名为upload_priority），优先级值越小优先级 越高。 
store_Server=0 

store_path #func：上传路径的选择方式。storage Server可以有多个存放文件的base path（可以理解为多个磁盘）。 #valu： # 0: 轮流方式，多个目录依次存放文件 # 2: 存储负载均衡。选择剩余空间大的目录存放文件（注意：剩余磁盘空间是动态的，因此存储到的目录或磁盘可能也是变 化的） 
store_path=0 

download_Server #func：下载服务器的选择方式。 #valu：0：轮询（默认） # 1：IP小者 # 2：优先级排序（值小的，优先级高。） 
download_Server=0 

reserved_storage_space #func：保留空间值。如果某个组中的某个服务器的剩余自由空间小于设定值，则文件不会被上传到这个组。 #valu： # G or g for gigabyte # M or m for megabyte # K or k for kilobyte 
reserved_storage_space=1GB 

log_level #func：日志级别 #valu： # emerg for emergency # alert # crit for critical # error # warn for warning # notice # info for information # debug for debugging 
log_level=info 

run_by_group / run_by_user #func：指定运行该程序的用户组 #valu：用户组名或空 
run_by_group=#func： #valu： 
run_by_user= 

allow_hosts #func：可以连接到tracker Server的ip范围。可设定多个值。 #valu 
allow_hosts= 

check_active_interval #func：检测 storage Server 存活的时间隔，单位为秒。 #      storage Server定期向tracker Server 发心跳， #      如果tracker Server在一个check_active_interval内还没有收到storage Server的一次心跳， #      那边将认为该storage Server已经下线。所以本参数值必须大于storage Server配置的心跳时间间隔。 #      通常配置为storage Server心跳时间间隔的2倍或3倍。 
check_active_interval=120 

thread_stack_size #func：设定线程栈的大小。 线程栈越大，一个线程占用的系统资源就越多。 #      如果要启动更多的线程（V1.x对应的参数为max_connections，V2.0为work_threads），可以适当降低本参数 值。 #valu：如64KB，默认值为64，tracker Server线程栈不应小于64KB 
thread_stack_size=64KB 

storage_ip_changed_auto_adjust #func：这个参数控制当storage Server IP地址改变时，集群是否自动调整。注：只有在storage Server进程重启时才 完成自动调整。 #valu：true或false 
storage_ip_changed_auto_adjust=true
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf 基本配置 end ###########################</span></span>
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf 同步配置 start ###########################</span></span>
storage_sync_file_max_delay #func：同组storage服务器之间同步的大延迟时间。存储服务器之间同步文件的大延迟时间，根据实际情况进行调整 #valu：秒为单位，默认值为1天（24*3600） #sinc：v2.0 
storage_sync_file_max_delay=86400 

storage_sync_file_max_time #func：存储服务器同步一个文件需要消耗的大时间，缺省为300s，即5分钟。 #sinc：v2.0 
storage_sync_file_max_time=300 

sync_log_buff_interval #func：同步或刷新日志信息到硬盘的时间间隔。注意：tracker Server 的日志不是时时写硬盘的，而是先写内存。 #valu：以秒为单位 
sync_log_buff_interval=10
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf 同步配置 end ###########################</span></span>
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf trunk和slot配置 start ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">func：是否使用trunk文件来存储几个小文件 <span class="hljs-comment">#valu：true或false #sinc：v3.0 </span></span>
use_trunk_file=false
<span class="hljs-meta">
#</span><span class="bash">func：小slot大小 <span class="hljs-comment">#valu：&#x3C;= 4KB，默认为256字节 #sinc：v3.0 </span></span>
slot_min_size=256
<span class="hljs-meta">
#</span><span class="bash">func：大slot大小 <span class="hljs-comment">#valu：>= slot_min_size，当小于这个值的时候就存储到trunk file中。默认为16MB。 #sinc：v3.0 </span></span>
slot_max_size=16MB
<span class="hljs-meta">
#</span><span class="bash">func：trunk file的size <span class="hljs-comment">#valu：>= 4MB，默认为64MB #sinc：v3.0 </span></span>
trunk_file_size=64MB
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf trunk和slot配置 end ###########################</span></span>
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf http配置 start ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">是否启用 HTTP <span class="hljs-comment">#func：HTTP是否生效 #valu：true或false </span></span>
http.disabled=false 
<span class="hljs-meta">
#</span><span class="bash">HTTP 服务器端口号 <span class="hljs-comment">#func：tracker Server上的http port #valu： #note：只有http.disabled=false时才生效 </span></span>
http.Server_port=7271 
<span class="hljs-meta">
#</span><span class="bash">检查Storage存活状态的间隔时间（心跳检测） <span class="hljs-comment">#func：检查storage http Server存活的间隔时间 #valu：单位为秒 #note：只有http.disabled=false时才生效 </span></span>
http.check_alive_interval=30 
<span class="hljs-meta">
#</span><span class="bash">心跳检测使用的协议方式 <span class="hljs-comment">#func：检查storage http Server存活的方式 #valu： # tcp：连接到storage Server的http端口，不进行request和response。 # http：storage check alive url must return http status 200. #note：只有http.disabled=false时才生效 </span></span>
http.check_alive_type=tcp
<span class="hljs-meta">
#</span><span class="bash">检查 Storage 状态的 URI <span class="hljs-comment">#func：检查storage http Server是否alive的uri/url #note：只有http.disabled=false时才生效 </span></span>
http.check_alive_uri=/status.html
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## tracker.conf http配置 end ###########################</span></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-17">fastdfs集成nginx</h4>
<pre><code class="hljs language-shell copyable" lang="shell"><span class="hljs-meta">#</span><span class="bash">下载fastdfs的nginx模块</span>
wget https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.20.tar.gz 
<span class="hljs-meta">
#</span><span class="bash">解压</span>
tar -zxvf V1.20.tar.gz 
<span class="hljs-meta">
#</span><span class="bash">修改config文件</span>
vim fastdfs-nginx-module-1.20/src/config
<span class="hljs-meta">
#</span><span class="bash">修改前的内容如下：</span>
ngx_addon_name=ngx_http_fastdfs_module
if test -n "${ngx_module_link}"; then
	ngx_module_type=HTTP
	ngx_module_name=$ngx_addon_name
	ngx_module_incs="/usr/local/include"
	ngx_module_libs="-lfastcommon -lfdfsclient"
	ngx_module_srcs="$ngx_addon_dir/ngx_http_fastdfs_module.c"
	ngx_module_deps=
	CFLAGS="$CFLAGS -D_FILE_OFFSET_BITS=64 -DFDFS_OUTPUT_CHUNK_SIZE='256*1024' DFDFS_MOD_CONF_FILENAME='\"/etc/fdfs/mod_fastdfs.conf\"'"
	. auto/module
else
	HTTP_MODULES="$HTTP_MODULES ngx_http_fastdfs_module"
	NGX_ADDON_SRCS="$NGX_ADDON_SRCS $ngx_addon_dir/ngx_http_fastdfs_module.c"
	CORE_INCS="$CORE_INCS /usr/local/include"
	CORE_LIBS="$CORE_LIBS -lfastcommon -lfdfsclient"
	CFLAGS="$CFLAGS -D_FILE_OFFSET_BITS=64 -DFDFS_OUTPUT_CHUNK_SIZE='256*1024' DFDFS_MOD_CONF_FILENAME='\"/etc/fdfs/mod_fastdfs.conf\"'" 
fi
<span class="hljs-meta">#</span><span class="bash">其中第6行和第15行要进行修改，修改后的内容如下：</span>
ngx_module_incs="/usr/include/fastdfs /usr/include/fastcommon/"
CORE_INCS="$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/" 
<span class="hljs-meta">

#</span><span class="bash">将fastdfs-nginx-module-1.20/src/mod_fastdfs.conf拷贝至/etc/fdfs/下</span>
cp fastdfs-nginx-module-1.20/src/mod_fastdfs.conf /etc/fdfs/
<span class="hljs-meta">
#</span><span class="bash">修改mod_fastdfs.conf </span>
vim /etc/fdfs/mod_fastdfs.conf

base_path=/data/server/fastdfs/storage    
tracker_Server=192.168.198.135:22122 #url中是否包含group名称    
url_have_group_name=true   #指定文件存储路径，访问时使用该路径   
store_path0=/data/server/fastdfs/storage 
<span class="hljs-meta">
#</span><span class="bash">拷贝libfdfsclient.so(新版不需要) 将libfdfsclient.so拷贝至/usr/lib下</span>
cp /usr/lib64/libfdfsclient.so /usr/lib/ 
<span class="hljs-meta">
#</span><span class="bash">在各个storage安装nginx（见nginx.md）</span>
<span class="hljs-meta">#</span><span class="bash">下载nginx，官方网站是 http://nginx.org ，自己找到需要的版本，右键复制下载链接</span>
wget http://nginx.org/download/nginx-1.19.2.tar.gz
<span class="hljs-meta">
#</span><span class="bash">解压</span>
tar -zxvf nginx-1.19.2.tar.gz
<span class="hljs-meta">
#</span><span class="bash">生成makefile。使用./configure --<span class="hljs-built_in">help</span>查看各个模块的使用情况，使用--without-http_ssi_module的方式关闭不需要的模块。可以使用--with-http_perl_modules方式安装需要的模块</span>
cd nginx-1.19.2

./configure --prefix=/usr/local/nginx --pid-path=/var/run/nginx/nginx.pid --lock-path=/var/lock/nginx.lock --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/temp/nginx/client --http-proxy-temp-path=/var/temp/nginx/proxy --http-fastcgi-temp-path=/var/temp/nginx/fastcgi --http-uwsgi-temp-path=/var/temp/nginx/uwsgi --http-scgi-temp-path=/var/temp/nginx/scgi --with-http_gzip_static_module --add-module=/data/soft/fastdfs-nginx-module-1.20/src
<span class="hljs-meta">
#</span><span class="bash">编译安装</span>
make &#x26;&#x26; make install
<span class="hljs-meta">
#</span><span class="bash">进入到安装目录</span>
cd /usr/local/nginx/
<span class="hljs-meta">
#</span><span class="bash">将 /usr/<span class="hljs-built_in">local</span>/nginx/sbin/nginx 软连接到 /usr/<span class="hljs-built_in">local</span>/sbin 下，就可以在任意地方使用nginx命令</span>
ln -s /usr/local/nginx/sbin/nginx /usr/local/sbin/
<span class="hljs-meta">
#</span><span class="bash">修改配置文件</span>
vim /usr/local/nginx/conf/nginx.conf
server {        
	listen       80;        
	server_name  localhost;        
	location /group1/M00/{                
		ngx_fastdfs_module;        
	}
}
<span class="hljs-meta">
#</span><span class="bash">启动nginx</span>
nginx
<span class="hljs-meta">

#</span><span class="bash"><span class="hljs-comment">########################## nginx集成图片压缩模块 start ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">安装gd，HttpImageFilterModule模块需要依赖gd-devel的支持</span>
yum -y install gd-devel
<span class="hljs-meta">
#</span><span class="bash">将http_image_filter_module包含进来</span>
cd /data/soft/nginx-1.19.2

./configure --prefix=/usr/local/nginx --pid-path=/var/run/nginx/nginx.pid --lock-path=/var/lock/nginx.lock --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/temp/nginx/client --http-proxy-temp-path=/var/temp/nginx/proxy --http-fastcgi-temp-path=/var/temp/nginx/fastcgi --http-uwsgi-temp-path=/var/temp/nginx/uwsgi --http-scgi-temp-path=/var/temp/nginx/scgi --with-http_gzip_static_module --add-module=/data/soft/fastdfs-nginx-module-1.20/src --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_image_filter_module

make &#x26;&#x26; make install
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## 注意：重新编译时，必须添加上nginx编译http的扩展模块,否则无法访问fastdfs图片</span></span>
<span class="hljs-meta">
#</span><span class="bash">修改nginx配置文件</span>
vim /usr/local/nginx/conf/nginx.conf

location ~ group1/M00/(.+)_(\d+)x(\d+)\.(jpg|gif|png) {
    # 设置别名（类似于root的用法）
    alias /data/server/fastdfs/storage/data/;
    # fastdfs中的ngx_fastdfs_module模块
    ngx_fastdfs_module;
    set $w $2;
    set $h $3;

    if ($w != "0") {
    	rewrite group1/M00(.+)_(\d+)x(\d+)\.(jpg|gif|png)$ group1/M00$1.$4 break;
    }

    if ($h != "0") {
    	rewrite group1/M00(.+)_(\d+)x(\d+)\.(jpg|gif|png)$ group1/M00$1.$4 break;
    }

    #根据给定的长宽生成缩略图   
    image_filter resize $w $h;

    #原图最大2M，要裁剪的图片超过2M返回415错误，需要调节参数image_filter_buffer    
    image_filter_buffer 2M;

    #try_files group1/M00$1.$4 $1.jpg;
}
<span class="hljs-meta">
#</span><span class="bash">重启nginx</span>
nginx -s stop
nginx
<span class="hljs-meta">
#</span><span class="bash">访问图片</span>
http://192.168.198.136/group1/M00/00/00/wKhlBVVY2M-AM_9DAAAT7-0xdqM485_100x200.png
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## nginx集成图片压缩模块 end ###########################</span></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-18">docker环境下安装fastdfs</h4>
<pre><code class="hljs language-shell copyable" lang="shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## 首先安装docker start ###########################</span></span>
<span class="hljs-meta">#</span><span class="bash">设置Yum源：（本文以Yum安装为例子进行安装）安装 yum-utils , 使用 yum-config-manager 工具设置Yum源, 后面两个是 devicemapper驱动依赖</span>
yum install -y yum-utils device-mapper-persistent-data lvm2
<span class="hljs-meta">
#</span><span class="bash">执行以下命令，添加docker的yum源</span>
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
<span class="hljs-meta">
#</span><span class="bash">查看所有仓库中docker版本，并选择特定版本安装：(此处我们查看社区版 docker-ce)</span>
yum list docker-ce --showduplicates | sort -r
<span class="hljs-meta">
#</span><span class="bash">安装docker (此处我们安装社区版 docker-ce)</span>
yum install docker-ce #这样写默认安装最新版本
<span class="hljs-meta">
#</span><span class="bash">启动并加入开机启动 </span>
systemctl start docker #重启命令 systemctl restart docker 
systemctl enable docker #开机启动
docker version #查看docker版本号
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">########################## 首先安装docker end ###########################</span></span>
<span class="hljs-meta">
#</span><span class="bash">拉取基础镜像</span>
docker pull centos:7
<span class="hljs-meta">
#</span><span class="bash">创建并运行容器</span>
docker run -di --name fastdfs --hostname fastdfs centos:7 /bin/bash
<span class="hljs-meta">
#</span><span class="bash">查看docker容器ip地址</span>
docker inspect adbedba2b3a7|grep IPAddress
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">###这里可能报错：IPv4 forwarding is disabled. Networking will not work.</span></span>
vim /etc/sysctl.conf
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###添加配置转发</span></span>
net.ipv4.ip_forward=1
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###重启服务，让配置生效</span></span>
systemctl restart network
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###查看是否成功,如果返回为“net.ipv4.ip_forward = 1”则表示成功</span></span>
sysctl net.ipv4.ip_forward
<span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">###重启docker服务</span></span>
service docker restart 
<span class="hljs-meta">
#</span><span class="bash">启动容器</span>
docker ps -a
docker start 1764f695bb11
<span class="hljs-meta">
#</span><span class="bash">进入容器，并创建对应目录</span>
docker exec -it 1764f695bb11 /bin/bash
<span class="hljs-meta">
#</span><span class="bash">从宿主机拷贝文件到容器</span>
docker cp /data/soft/jdk-8u221-linux-x64.tar.gz fastdfs:/data/soft/
<span class="hljs-meta">
#</span><span class="bash">从容器拷贝文件到宿主机</span>
docker cp fastdfs:/data/soft/jdk-8u221-linux-x64.tar.gz /data/soft/
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">###################################### 这里开始走单机安装fastdfs</span></span>
<span class="hljs-meta">
#</span><span class="bash"><span class="hljs-comment">###docker容器执行yum命令报错</span></span>
https://blog.csdn.net/qq_44543508/article/details/103825500
<span class="hljs-meta">#</span><span class="bash">容器里执行</span>
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
<span class="hljs-meta">#</span><span class="bash">宿主机里执行</span>
docker cp /etc/yum.repos.d/CentOS-Base.repo fastdfs:/etc/yum.repos.d
<span class="hljs-meta">#</span><span class="bash">容器里执行</span>
yum clean all
yum makecache
yum repolist
<span class="copy-code-btn">复制代码</span></code></pre></div> <div class="image-viewer-box" data-v-78c9b824><!----></div></div></article> <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div> <!----> <!----> <div class="article-suspended-panel article-suspended-panel" data-v-19356a56 data-v-064b8453><div badge="9" class="like-btn panel-btn like-adjust with-badge" data-v-19356a56></div> <div badge="3" class="comment-btn panel-btn comment-adjust with-badge" data-v-19356a56></div> <div class="collect-btn panel-btn" data-v-19356a56><!----></div> <div class="share-title" data-v-19356a56>分享</div> <div class="weibo-btn share-btn panel-btn" data-v-19356a56></div> <div class="qq-btn share-btn panel-btn" data-v-19356a56></div> <div class="wechat-btn share-btn panel-btn" data-v-19356a56><img src="" class="wechat-qr-code-img shadow" style="display:none;" data-v-19356a56></div></div></div></main></div> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return {layout:"default",data:[{}],fetch:[],error:b,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:c,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:g,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:g,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:c,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:j,name:j,title:"推荐 ",id:j},{type:k,name:k,title:"热门 ",id:k},{type:l,name:l,title:"关注 ",id:l},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:m}},search:{list:[],linkList:[],query:e,period:n,type:n,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:o,category:n},hotList:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:m,category:j,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},timelineList:{list:[],cursor:f,skeleton:a,loading:a,hasMore:a,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,hasMore:a,skeleton:a,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:a,loading:a,hasMore:c,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:c,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:c,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:o,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:c,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:c,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:c,hasMore:a,loading:a,type:"bought",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d}},list:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{column:{id:q},entry:{id:q,screenshot:void 0,liked:a,article_id:q,article_info:{article_id:q,user_id:"2726421782335303",category_id:"6809637769959178254",tag_ids:[6809641135154135000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"一文教你认清FastDFS及生产环境的搭建",brief_content:"初期：“产品图片直接存在war包或者jar包里，用户图片存储在服务器的某个文件目录下。使用nginx代理获取和访问图片。 中期：伴随着业务的复杂度越来越高，用户量越来越大，但从文件存储这块来说，当前架构已经不像初期那样游刃有余；产品图片越来越多，war包或jar包越来越重，文件…",is_english:d,is_original:h,user_index:d,original_type:d,original_author:e,content:e,ctime:"1605260592",mtime:"1605269762",rtime:"1605269762",draft_id:"6894501065270984718",view_count:348,collect_count:d,digg_count:9,comment_count:3,hot_index:29,is_hot:d,rank_index:.06291541,status:2,verify_status:h,audit_status:2,mark_content:"#### FastDFS简介\n\n\u003E fdfs是一款有c语言开发的高性能文件服务器，专门存储中小型文件（互联网），特别适合以文件为载体的应用，支持在线扩容、冗余备份、负载均衡等功能。使用fastdfs很容易搭建 一套高性能的文件服务器集群提供文件的上传和下载服务。\n\n#### 与其他文件系统的对比\n\n| 指标      | 适合类型   | 文件分布                    | 系统性能       | 复杂度 | FUSE     | POSIX  | 备份机制               | 通讯协议接口 | 社区支持   | 去重 | 开发语言 |\n| --------- | ---------- | --------------------------- | -------------- | ------ | -------- | ------ | ---------------------- | ------------ | ---------- | ---- | -------- |\n| FastDFS   | 4KB~500MB  | 小文件合并存储不分片处理    | 很高           | 简单   | 不支持   | 不支持 | 组内冗余备份           | ApiHTTP      | 国内用户群 |      | C语言    |\n| TFS       | 所有文件   | 小文件合并，以block组织分片 |                | 复杂   | 不支持   | 不支持 | Block存储多份,主辅灾备 | APIhttp      | 少         |      | C++      |\n| MFS       | 大于64K    | 分片存储                    | Master占内存多 |        | 支持     | 支持   | 多点备份动态冗余       | 使用fuse挂在 | 较多       |      | Perl     |\n| HDFS      | 大文件     | 大文件分片分块存储          |                | 简单   | 支持     | 支持   | 多副本                 | 原生api      | 较多       |      | java     |\n| Ceph      | 对象文件块 | OSD一主多从                 |                | 复杂   | 支持     | 支持   | 多副本                 | 原生api      | 较少       |      | C++      |\n| MogileFS  | 海量小图片 |                             | 高             | 复杂   | 可以支持 | 不支持 | 动态冗余               | 原生api      | 文档少     |      | Perl     |\n| ClusterFS | 大文件     |                             |                | 简单   | 支持     | 支持   | 镜像                   |              | 多         |      | C        |\n\n#### 为什么要使用第三方文件系统\n\n\u003E 背景：以我参加工作第一家公司举例，该公司做Saas餐饮、零售软件，初期为互联网单体应用\n\n1. 初期：“产品图片直接存在war包或者jar包里，用户图片存储在服务器的某个文件目录下。使用nginx代理获取和访问图片。\n2. 中期：伴随着业务的复杂度越来越高，用户量越来越大，但从文件存储这块来说，当前架构已经不像初期那样游刃有余；产品图片越来越多，war包或jar包越来越重，文件越来越多，资源消耗过高，性能越来越差，单点故障不可恢复；这时我们考虑升级到集群架构。\n3. 中后期：集群架构模式下，这样拥有了备份冗余，避免了单点故障，但是由于集群架构下，文件需要同步到集群中的每台机器，极大的浪费了I\u002FO资源，性能也是比较差的；而且还得同步老文件。这时，我们考虑使用第三方文件服务器。\n4. 后期：集群架构下使用第三方服务器，也就是我们今天讲到的Fastdfs+nginx；这种模式下，减轻了业务服务器的压力。同时，也解决了单点故障和I\u002FO资源的浪费。\n\n#### fastdfs架构\n\n![Aleyson爱逼逼](https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F4787f9758a624935b95cb06bffedb343~tplv-k3u1fbpfcp-watermark.image)\n\n#### fastdfs原理\n\n##### **Tracker**\n\n- 追踪服务器负责接收客户端的请求，负载均衡。调度合适的组别storage，tracker和storage之间也会用心跳机制来检测对方是否存活。\n- tracker需要管理的信息（分组信息和storage的状态等）也都放在内存中，每个tracker都是无状态的，对等的，很容易扩展。\n- 客户端访问tracker集群的时候会随机分配一个tracker来和客户端进行交互。\n\n##### **Storage**\n\n- 存储服务器是实际存储文件的的地方，分成若干个group，同一group下数据冗余复制，提高了可用性。\n  - 同组策略：\n    - 同组服务器数据是一样的\n    - 同组服务器数据要相互备份，服务器容量大小必须一致\n    - 同组之间服务器同步是在后台完成\n    - 同组集群：冗余备份，负载均衡（空间换时间）\n  - 不同组策略：\n    - 组合组之间的文件是不相同的\n    - 整个组之间的容量集合就是整个文件系统的文件\n    - 分组就是文件系统的扩容\n- 而tracker实际上就是管理storage中的组，group可以隔离不同应用的数据。\n- 文件的访问需要storage端集成nginx。\n- 对文件的处理需要对文件内容做hash处理，避免出现重复的文件。\n\n\n##### **Client**\n\n每台机器上都有客户端，供用户进行测试使用或上传下载文件使用的服务器。\n\n![Aleyson爱逼逼](https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F6bfdb962bb6f4fb99171f5e18f91a48d~tplv-k3u1fbpfcp-watermark.image)\n##### 同步机制\n\n###### tracker server\n\n\u003E tracker server会在内存中保存storage中的分组信息以及storage server信息，并会将自己已知的storage server及分组信息持久化到本地文件中，以便于重启服务的时候从本地文件恢复该类信息。\n\n1. 当一个分组新增一个 storage server 或者 storage server 状态更改\n\n   tracker server 都会将已知的 storage server 列表同步给该组下的所有 storage server。\n\n   例如：新增一个 storage server ，该 storage server 连接 tracker server ，tracker server 会将新增的 storage server 加入列表并同步给该组下的所有 storage server（包括新增加的 storage server）。\n\n2. 当新增一台tracker server\n\n   storage server 会连接 tracker server，tracker server 返回该组下的列表，发现 tracker server 返回的列表比自己已知的还要少，就会将自己的列表给 tracker server 更新。\n\n###### storage server 同步状态\n\n- FDFS_STORAGE_STATUS_INIT   \t\t\t\t初始化，未得到同步源服务器\n- FDFS_STORAGE_STATUS_WAIT_SYNC     等待同步\n- FDFS_STORAGE_STATUS_SYNCING         同步中\n- FDFS_STORAGE_STATUS_DELETED         删除\n- FDFS_STORAGE_STATUS_OFFLINE           离线\n- FDFS_STORAGE_STATUS_ONLINE             在线，尚不能提供服务\n- FDFS_STORAGE_STATUS_ACTIVE             在线，可以提供服务\n\n###### storage server\n\n\u003E storage server 会在内存中保存本组所有的服务信息，并持久化到本地文件中。同一组内的 storage server 是对等的，新增和删除操作可以在该组内的任一一台 storage server 上进行，文件同步只在组内进行，并且采用 push 的方式。\n\n1. 同步规则\n   1. 只有本组内的 storage server 之间需要同步\n   2. 源头数据需要同步，备份数据不需要同步\n   3. 新增 storage server 时，将该组内已知的一台 storage server 的源数据和备份数据全部同步给新增的 storage server\n2. 逻辑处理\n   1. 当 storage server 的状态为 FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务）时，当该 storage server 向 tracker server 发送一次心跳时， tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）\n   2. 当组内新增一台 storage server 时\n      1.  storage server 连接 tracker server ， tracker server 会将其状态更改为 FDFS_STORAGE_STATUS_INIT（初始化，未得到同步源服务器）\n      2. 此时，storage server 会询问追加同步的源服务器和追加同步的截止时间戳，如果当前组内只有新增的 storage server 或者存在的文件数为0，则不需要同步数据，此时 tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务），等到 storage server 向 tracker server 发起心跳时，tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）；如果有数据需要同步，此时 tracker server 会将其状态更改为 FDFS_STORAGE_STATUS_WAIT_SYNC（等待同步）。\n      3. 当 tracker server 向 storage server 分配一个同步已有数据的源服务器。同组的 storage server 与  tracker server 通信后，知道了新增了一个 storage server ，将启动同步线程，并向 tracker server 获取需要同步的源服务器和同步截止时间戳，此时， tracker server 会将  storage server 的状态更改为 FDFS_STORAGE_STATUS_SYNCING（同步中），源服务器将需要同步的数据同步给 storage server ，其余的组内服务器会在同步截止时间戳正常同步数据给  storage server ，并且只同步源头数据。\n      4. 待源服务器将数据同步给  storage server 完成后，会请求  tracker server 将 storage server 的状态更改为 FDFS_STORAGE_STATUS_ONLINE（在线，尚不能提供服务），等到 storage server 向 tracker server 发起心跳时，tracker server 会将其状态更改为FDFS_STORAGE_STATUS_ACTIVE（ 在线，可以提供服务）\n\n##### **文件上传**\n\n![Aleyson爱逼逼](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Feffc335dd31a483586a935510b9841fa~tplv-k3u1fbpfcp-watermark.image)\n\n##### **文件名**\n\n- 当文件上传成功后，会为该文件生成一个文件名：group+存储目录+两级子目录+文件名+文件后缀名（客户端指定，用于区分文件类型）。\n\n![Aleyson爱逼逼](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fd8f8bd4017464ecbb0d5fce638feca48~tplv-k3u1fbpfcp-watermark.image)\n\n1. group1：组名，因为storage要分组，故这一级表名文件存储在哪一个storage中\n2. M00：虚拟磁盘的路径（这个是在storage配置文件中指定的，见下）\n   1. store_path0=\u002Fdata\u002Ffastdfs\u002Fstorage ============== M00\n   2. store_path1=\u002Fhome\u002Fyuqing\u002Ffastdfs2 ============ M01\n3. 00\u002F0C：目录有16 * 16 * 16 * 16 = 2^16\n4. 文件名：文件名由：源服务器IP+文件创建时间+文件大小+文件crc32+随机数 组成。其是对前者进行了Base64编码。\n\n##### **文件下载**\n\n![Aleyson爱逼逼](https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F70f9d4169d50404187102c9a02c148f6~tplv-k3u1fbpfcp-watermark.image)\n\n#### 单机安装fastdfs\n\n```shell\n########################### FastDFS安装 start ###########################\n#机器需求\nTracker Server：192.168.198.135 \nStorage Server：192.168.198.136、192.168.198.137 \n\n########################## 三台机器都需要安装\n#全部依赖环境安装 \nyum -y install zlib zlib-devel pcre pcre-devel gcc gcc-c++ openssl openssl-devel libevent libevent-devel perl unzip net-tools wget\n\n#下载 libfastcommon 包\nwget https:\u002F\u002Fgithub.com\u002Fhappyfish100\u002Flibfastcommon\u002Farchive\u002FV1.0.39.tar.gz\n\n#解压 libfastcommon 包\ntar -zxvf  V1.0.39.tar.gz\n\n#安装 libfastcommon 包\ncd libfastcommon-1.0.39 \n.\u002Fmake.sh && .\u002Fmake.sh  install\n\n#拷贝 libfastcommon.so 文件至 \u002Fusr\u002Flib 目录（新版本不需要此步）\ncp  \u002Fusr\u002Flib64\u002Flibfastcommon.so  \u002Fusr\u002Flib\u002F\n\n#下载 fastdfs 源码包\nwget https:\u002F\u002Fgithub.com\u002Fhappyfish100\u002Ffastdfs\u002Farchive\u002FV5.11.tar.gz\n\n#解压 fastdfs 源码包\ntar -zxvf  V5.11.tar.gz\n\n#安装 fastdfs 源码包\ncd fastdfs-5.11\n.\u002Fmake.sh && .\u002Fmake.sh install\n\n#拷贝\u002Froot\u002Ffastdfs-5.11\u002Fconf目录下的文件到\u002Fetc\u002Ffdfs目录下\ncp \u002Fdata\u002Fsoft\u002Ffastdfs-5.11\u002Fconf\u002F* \u002Fetc\u002Ffdfs\n\n#关闭并禁用防火墙\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n########################## tracker server配置\n#修改\u002Fetc\u002Ffdfs\u002Ftracker.conf\nvim \u002Fetc\u002Ffdfs\u002Ftracker.conf\n\nbase_path=\u002Fdata\u002Fserver\u002Ffastdfs\u002Ftracker \n\n#创建tracker服务器上面的目录\nmkdir \u002Fdata\u002Fserver\u002Ffastdfs\u002Ftracker -p\n\n########################## storage server配置\n#修改\u002Fetc\u002Ffdfs\u002Fstorage.conf\nvim \u002Fetc\u002Ffdfs\u002Fstorage.conf\n\n#指定storage的组名 \ngroup_name=group1 \nbase_path=\u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage \nstore_path0=\u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage #M00虚拟磁盘路径 \n#如果有多个挂载磁盘则定义多个store_path，如下 \n#store_path1=..... \n#store_path2=...... \n#配置tracker服务器IP和端口 \ntracker_Server=192.168.198.135:22122   \n#如果有多个则配置多个tracker \n#tracker_Server=192.168.101.4:22122\n\n#创建storage服务器上面的目录\nmkdir \u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage -p\n########################### FastDFS安装 end ###########################\n#创建软连接\nln -s \u002Fusr\u002Fbin\u002Ffdfs_trackerd \u002Fusr\u002Flocal\u002Fbin\nln -s \u002Fusr\u002Fbin\u002Ffdfs_storaged \u002Fusr\u002Flocal\u002Fbin\n\n#Tracker 启动命令 \nfdfs_trackerd \u002Fetc\u002Ffdfs\u002Ftracker.conf\n\n#Storage 启动命令 \nfdfs_storaged \u002Fetc\u002Ffdfs\u002Fstorage.conf\n\n#集群状态检查命令 \nfdfs_monitor \u002Fetc\u002Ffdfs\u002Fstorage.conf\n\n#删除 Storage \nfdfs_monitor \u002Fetc\u002Ffdfs\u002Fstorage.conf delete 组名 storage的ip\n\n#Tracker 关闭命令 \nkillall fdfs_trackerd\n\n#Storage 关闭命令 \nkillall fdfs_storaged\n\n#缺少 killall 命令进行安装 \nyum install psmisc -y\n\n########################## 配置开机自启动\nvim \u002Fetc\u002Frc.d\u002Frc.local\n\nfdfs_trackerd \u002Fetc\u002Ffdfs\u002Ftracker.conf\nfdfs_storaged \u002Fetc\u002Ffdfs\u002Fstorage.conf\n\n########################## 图片上传测试\n#修改client.conf\nvim \u002Fetc\u002Ffdfs\u002Fclient.conf\n\nbase_path=\u002Fdata\u002Fserver\u002Ffastdfs\u002Fclient \ntracker_Server=192.168.198.135:22122\n\n#创建 client 的数据目录\nmkdir -p \u002Fdata\u002Fserver\u002Ffastdfs\u002Fclient\n\n#使用 ==fdfs_test== 命令将\u002Fhome下的tomcat.png上传到FastDFS中\n\u002Fusr\u002Fbin\u002Ffdfs_test  \u002Fetc\u002Ffdfs\u002Fclient.conf  upload  \u002Fetc\u002Ffdfs\u002Fanti-steal.jpg \n\nhttp:\u002F\u002F192.168.198.136\u002Fgroup1\u002FM00\u002F00\u002F00\u002FwKhlBVVY2M-AM_9DAAAT7-0xdqM485_big.png 就是文件的访问路径\n\u002Fhome\u002Ffastdfs\u002Ffdfs_storage\u002Fdata\u002F00\u002F00\u002FwKhlBVVY2M-AM_9DAAAT7-0xdqM485_big.png 就是storage服务器上磁盘路径\n```\n\n#### tracker配置文件详解\n\n```shell\n########################### tracker.conf 基本配置 start ###########################\ndisable #func：配置是否生效 #valu：true、false\ndisable=false \n\nbind_addr #func：绑定IP #valu：IP地址 \nbind_addr=192.168.6.102 \n\nport #func：服务端口 #valu：端口整数值 \nport=22122 \n\nconnect_timeout #func：连接超时 #valu：秒单位正整数值 \nconnect_timeout=30 \n\nnetwork_timeout #func：网络超时 #valu：秒单位正整数值 \nnetwork_timeout=60 \n\nbase_path #func：Tracker数据\u002F日志目录地址 #valu：路径 \nbase_path=\u002Fhome\u002Fmichael\u002Ffdfs\u002Fbase4tracker \n\nmax_connections #func：大连接数 #valu：正整数值 \nmax_connections=256 \n\nwork_threads #func：线程数，通常设置CPU数 #valu：正整数值\nwork_threads=4 \n\nstore_lookup #func：上传文件的选组方式。 #valu：0、1或2。 # 0：表示轮询 # 1：表示指定组 # 2：表示存储负载均衡（选择剩余空间大的组） \nstore_lookup=2 \n\nstore_group #func：指定上传的组，如果在应用层指定了具体的组，那么这个参数将不会起效。另外如果store_lookup如果是0或2，则 此参数无效。 #valu：group1等 \nstore_group=group1 \n\nstore_Server #func：上传服务器的选择方式。(一个文件被上传后，这个storage Server就相当于这个文件的storage Server源，会 对同组的storage Server推送这个文件达到同步效果) #valu：0、1或2 # 0: 轮询方式（默认） # 1: 根据ip 地址进行排序选择第一个服务器（IP地址小者） # 2: 根据优先级进行排序（上传优先级由storage Server来设置，参数名为upload_priority），优先级值越小优先级 越高。 \nstore_Server=0 \n\nstore_path #func：上传路径的选择方式。storage Server可以有多个存放文件的base path（可以理解为多个磁盘）。 #valu： # 0: 轮流方式，多个目录依次存放文件 # 2: 存储负载均衡。选择剩余空间大的目录存放文件（注意：剩余磁盘空间是动态的，因此存储到的目录或磁盘可能也是变 化的） \nstore_path=0 \n\ndownload_Server #func：下载服务器的选择方式。 #valu：0：轮询（默认） # 1：IP小者 # 2：优先级排序（值小的，优先级高。） \ndownload_Server=0 \n\nreserved_storage_space #func：保留空间值。如果某个组中的某个服务器的剩余自由空间小于设定值，则文件不会被上传到这个组。 #valu： # G or g for gigabyte # M or m for megabyte # K or k for kilobyte \nreserved_storage_space=1GB \n\nlog_level #func：日志级别 #valu： # emerg for emergency # alert # crit for critical # error # warn for warning # notice # info for information # debug for debugging \nlog_level=info \n\nrun_by_group \u002F run_by_user #func：指定运行该程序的用户组 #valu：用户组名或空 \nrun_by_group=#func： #valu： \nrun_by_user= \n\nallow_hosts #func：可以连接到tracker Server的ip范围。可设定多个值。 #valu \nallow_hosts= \n\ncheck_active_interval #func：检测 storage Server 存活的时间隔，单位为秒。 #      storage Server定期向tracker Server 发心跳， #      如果tracker Server在一个check_active_interval内还没有收到storage Server的一次心跳， #      那边将认为该storage Server已经下线。所以本参数值必须大于storage Server配置的心跳时间间隔。 #      通常配置为storage Server心跳时间间隔的2倍或3倍。 \ncheck_active_interval=120 \n\nthread_stack_size #func：设定线程栈的大小。 线程栈越大，一个线程占用的系统资源就越多。 #      如果要启动更多的线程（V1.x对应的参数为max_connections，V2.0为work_threads），可以适当降低本参数 值。 #valu：如64KB，默认值为64，tracker Server线程栈不应小于64KB \nthread_stack_size=64KB \n\nstorage_ip_changed_auto_adjust #func：这个参数控制当storage Server IP地址改变时，集群是否自动调整。注：只有在storage Server进程重启时才 完成自动调整。 #valu：true或false \nstorage_ip_changed_auto_adjust=true\n########################### tracker.conf 基本配置 end ###########################\n\n########################### tracker.conf 同步配置 start ###########################\nstorage_sync_file_max_delay #func：同组storage服务器之间同步的大延迟时间。存储服务器之间同步文件的大延迟时间，根据实际情况进行调整 #valu：秒为单位，默认值为1天（24*3600） #sinc：v2.0 \nstorage_sync_file_max_delay=86400 \n\nstorage_sync_file_max_time #func：存储服务器同步一个文件需要消耗的大时间，缺省为300s，即5分钟。 #sinc：v2.0 \nstorage_sync_file_max_time=300 \n\nsync_log_buff_interval #func：同步或刷新日志信息到硬盘的时间间隔。注意：tracker Server 的日志不是时时写硬盘的，而是先写内存。 #valu：以秒为单位 \nsync_log_buff_interval=10\n########################### tracker.conf 同步配置 end ###########################\n\n########################### tracker.conf trunk和slot配置 start ###########################\n#func：是否使用trunk文件来存储几个小文件 #valu：true或false #sinc：v3.0 \nuse_trunk_file=false\n\n#func：小slot大小 #valu：\u003C= 4KB，默认为256字节 #sinc：v3.0 \nslot_min_size=256\n\n#func：大slot大小 #valu：\u003E= slot_min_size，当小于这个值的时候就存储到trunk file中。默认为16MB。 #sinc：v3.0 \nslot_max_size=16MB\n\n#func：trunk file的size #valu：\u003E= 4MB，默认为64MB #sinc：v3.0 \ntrunk_file_size=64MB\n########################### tracker.conf trunk和slot配置 end ###########################\n\n########################### tracker.conf http配置 start ###########################\n#是否启用 HTTP #func：HTTP是否生效 #valu：true或false \nhttp.disabled=false \n\n#HTTP 服务器端口号 #func：tracker Server上的http port #valu： #note：只有http.disabled=false时才生效 \nhttp.Server_port=7271 \n\n#检查Storage存活状态的间隔时间（心跳检测） #func：检查storage http Server存活的间隔时间 #valu：单位为秒 #note：只有http.disabled=false时才生效 \nhttp.check_alive_interval=30 \n\n#心跳检测使用的协议方式 #func：检查storage http Server存活的方式 #valu： # tcp：连接到storage Server的http端口，不进行request和response。 # http：storage check alive url must return http status 200. #note：只有http.disabled=false时才生效 \nhttp.check_alive_type=tcp\n\n#检查 Storage 状态的 URI #func：检查storage http Server是否alive的uri\u002Furl #note：只有http.disabled=false时才生效 \nhttp.check_alive_uri=\u002Fstatus.html\n########################### tracker.conf http配置 end ###########################\n```\n\n#### fastdfs集成nginx\n\n```shell\n#下载fastdfs的nginx模块\nwget https:\u002F\u002Fgithub.com\u002Fhappyfish100\u002Ffastdfs-nginx-module\u002Farchive\u002FV1.20.tar.gz \n\n#解压\ntar -zxvf V1.20.tar.gz \n\n#修改config文件\nvim fastdfs-nginx-module-1.20\u002Fsrc\u002Fconfig\n\n#修改前的内容如下：\nngx_addon_name=ngx_http_fastdfs_module\nif test -n \"${ngx_module_link}\"; then\n\tngx_module_type=HTTP\n\tngx_module_name=$ngx_addon_name\n\tngx_module_incs=\"\u002Fusr\u002Flocal\u002Finclude\"\n\tngx_module_libs=\"-lfastcommon -lfdfsclient\"\n\tngx_module_srcs=\"$ngx_addon_dir\u002Fngx_http_fastdfs_module.c\"\n\tngx_module_deps=\n\tCFLAGS=\"$CFLAGS -D_FILE_OFFSET_BITS=64 -DFDFS_OUTPUT_CHUNK_SIZE='256*1024' DFDFS_MOD_CONF_FILENAME='\\\"\u002Fetc\u002Ffdfs\u002Fmod_fastdfs.conf\\\"'\"\n\t. auto\u002Fmodule\nelse\n\tHTTP_MODULES=\"$HTTP_MODULES ngx_http_fastdfs_module\"\n\tNGX_ADDON_SRCS=\"$NGX_ADDON_SRCS $ngx_addon_dir\u002Fngx_http_fastdfs_module.c\"\n\tCORE_INCS=\"$CORE_INCS \u002Fusr\u002Flocal\u002Finclude\"\n\tCORE_LIBS=\"$CORE_LIBS -lfastcommon -lfdfsclient\"\n\tCFLAGS=\"$CFLAGS -D_FILE_OFFSET_BITS=64 -DFDFS_OUTPUT_CHUNK_SIZE='256*1024' DFDFS_MOD_CONF_FILENAME='\\\"\u002Fetc\u002Ffdfs\u002Fmod_fastdfs.conf\\\"'\" \nfi\n#其中第6行和第15行要进行修改，修改后的内容如下：\nngx_module_incs=\"\u002Fusr\u002Finclude\u002Ffastdfs \u002Fusr\u002Finclude\u002Ffastcommon\u002F\"\nCORE_INCS=\"$CORE_INCS \u002Fusr\u002Finclude\u002Ffastdfs \u002Fusr\u002Finclude\u002Ffastcommon\u002F\" \n\n\n#将fastdfs-nginx-module-1.20\u002Fsrc\u002Fmod_fastdfs.conf拷贝至\u002Fetc\u002Ffdfs\u002F下\ncp fastdfs-nginx-module-1.20\u002Fsrc\u002Fmod_fastdfs.conf \u002Fetc\u002Ffdfs\u002F\n\n#修改mod_fastdfs.conf \nvim \u002Fetc\u002Ffdfs\u002Fmod_fastdfs.conf\n\nbase_path=\u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage    \ntracker_Server=192.168.198.135:22122 #url中是否包含group名称    \nurl_have_group_name=true   #指定文件存储路径，访问时使用该路径   \nstore_path0=\u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage \n\n#拷贝libfdfsclient.so(新版不需要) 将libfdfsclient.so拷贝至\u002Fusr\u002Flib下\ncp \u002Fusr\u002Flib64\u002Flibfdfsclient.so \u002Fusr\u002Flib\u002F \n\n#在各个storage安装nginx（见nginx.md）\n#下载nginx，官方网站是 http:\u002F\u002Fnginx.org ，自己找到需要的版本，右键复制下载链接\nwget http:\u002F\u002Fnginx.org\u002Fdownload\u002Fnginx-1.19.2.tar.gz\n\n#解压\ntar -zxvf nginx-1.19.2.tar.gz\n\n#生成makefile。使用.\u002Fconfigure --help查看各个模块的使用情况，使用--without-http_ssi_module的方式关闭不需要的模块。可以使用--with-http_perl_modules方式安装需要的模块\ncd nginx-1.19.2\n\n.\u002Fconfigure --prefix=\u002Fusr\u002Flocal\u002Fnginx --pid-path=\u002Fvar\u002Frun\u002Fnginx\u002Fnginx.pid --lock-path=\u002Fvar\u002Flock\u002Fnginx.lock --error-log-path=\u002Fvar\u002Flog\u002Fnginx\u002Ferror.log --http-log-path=\u002Fvar\u002Flog\u002Fnginx\u002Faccess.log --http-client-body-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fclient --http-proxy-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fproxy --http-fastcgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Ffastcgi --http-uwsgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fuwsgi --http-scgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fscgi --with-http_gzip_static_module --add-module=\u002Fdata\u002Fsoft\u002Ffastdfs-nginx-module-1.20\u002Fsrc\n\n#编译安装\nmake && make install\n\n#进入到安装目录\ncd \u002Fusr\u002Flocal\u002Fnginx\u002F\n\n#将 \u002Fusr\u002Flocal\u002Fnginx\u002Fsbin\u002Fnginx 软连接到 \u002Fusr\u002Flocal\u002Fsbin 下，就可以在任意地方使用nginx命令\nln -s \u002Fusr\u002Flocal\u002Fnginx\u002Fsbin\u002Fnginx \u002Fusr\u002Flocal\u002Fsbin\u002F\n\n#修改配置文件\nvim \u002Fusr\u002Flocal\u002Fnginx\u002Fconf\u002Fnginx.conf\nserver {        \n\tlisten       80;        \n\tserver_name  localhost;        \n\tlocation \u002Fgroup1\u002FM00\u002F{                \n\t\tngx_fastdfs_module;        \n\t}\n}\n\n#启动nginx\nnginx\n\n\n########################### nginx集成图片压缩模块 start ###########################\n#安装gd，HttpImageFilterModule模块需要依赖gd-devel的支持\nyum -y install gd-devel\n\n#将http_image_filter_module包含进来\ncd \u002Fdata\u002Fsoft\u002Fnginx-1.19.2\n\n.\u002Fconfigure --prefix=\u002Fusr\u002Flocal\u002Fnginx --pid-path=\u002Fvar\u002Frun\u002Fnginx\u002Fnginx.pid --lock-path=\u002Fvar\u002Flock\u002Fnginx.lock --error-log-path=\u002Fvar\u002Flog\u002Fnginx\u002Ferror.log --http-log-path=\u002Fvar\u002Flog\u002Fnginx\u002Faccess.log --http-client-body-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fclient --http-proxy-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fproxy --http-fastcgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Ffastcgi --http-uwsgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fuwsgi --http-scgi-temp-path=\u002Fvar\u002Ftemp\u002Fnginx\u002Fscgi --with-http_gzip_static_module --add-module=\u002Fdata\u002Fsoft\u002Ffastdfs-nginx-module-1.20\u002Fsrc --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --with-http_image_filter_module\n\nmake && make install\n### 注意：重新编译时，必须添加上nginx编译http的扩展模块,否则无法访问fastdfs图片\n\n#修改nginx配置文件\nvim \u002Fusr\u002Flocal\u002Fnginx\u002Fconf\u002Fnginx.conf\n\nlocation ~ group1\u002FM00\u002F(.+)_(\\d+)x(\\d+)\\.(jpg|gif|png) {\n    # 设置别名（类似于root的用法）\n    alias \u002Fdata\u002Fserver\u002Ffastdfs\u002Fstorage\u002Fdata\u002F;\n    # fastdfs中的ngx_fastdfs_module模块\n    ngx_fastdfs_module;\n    set $w $2;\n    set $h $3;\n\n    if ($w != \"0\") {\n    \trewrite group1\u002FM00(.+)_(\\d+)x(\\d+)\\.(jpg|gif|png)$ group1\u002FM00$1.$4 break;\n    }\n\n    if ($h != \"0\") {\n    \trewrite group1\u002FM00(.+)_(\\d+)x(\\d+)\\.(jpg|gif|png)$ group1\u002FM00$1.$4 break;\n    }\n\n    #根据给定的长宽生成缩略图   \n    image_filter resize $w $h;\n\n    #原图最大2M，要裁剪的图片超过2M返回415错误，需要调节参数image_filter_buffer    \n    image_filter_buffer 2M;\n\n    #try_files group1\u002FM00$1.$4 $1.jpg;\n}\n\n#重启nginx\nnginx -s stop\nnginx\n\n#访问图片\nhttp:\u002F\u002F192.168.198.136\u002Fgroup1\u002FM00\u002F00\u002F00\u002FwKhlBVVY2M-AM_9DAAAT7-0xdqM485_100x200.png\n########################### nginx集成图片压缩模块 end ###########################\n```\n\n\n\n#### docker环境下安装fastdfs\n\n```shell\n########################### 首先安装docker start ###########################\n#设置Yum源：（本文以Yum安装为例子进行安装）安装 yum-utils , 使用 yum-config-manager 工具设置Yum源, 后面两个是 devicemapper驱动依赖\nyum install -y yum-utils device-mapper-persistent-data lvm2\n\n#执行以下命令，添加docker的yum源\nyum-config-manager --add-repo https:\u002F\u002Fdownload.docker.com\u002Flinux\u002Fcentos\u002Fdocker-ce.repo\n\n#查看所有仓库中docker版本，并选择特定版本安装：(此处我们查看社区版 docker-ce)\nyum list docker-ce --showduplicates | sort -r\n\n#安装docker (此处我们安装社区版 docker-ce)\nyum install docker-ce #这样写默认安装最新版本\n\n#启动并加入开机启动 \nsystemctl start docker #重启命令 systemctl restart docker \nsystemctl enable docker #开机启动\ndocker version #查看docker版本号\n########################### 首先安装docker end ###########################\n\n#拉取基础镜像\ndocker pull centos:7\n\n#创建并运行容器\ndocker run -di --name fastdfs --hostname fastdfs centos:7 \u002Fbin\u002Fbash\n\n#查看docker容器ip地址\ndocker inspect adbedba2b3a7|grep IPAddress\n\n####这里可能报错：IPv4 forwarding is disabled. Networking will not work.\nvim \u002Fetc\u002Fsysctl.conf\n####添加配置转发\nnet.ipv4.ip_forward=1\n####重启服务，让配置生效\nsystemctl restart network\n####查看是否成功,如果返回为“net.ipv4.ip_forward = 1”则表示成功\nsysctl net.ipv4.ip_forward\n####重启docker服务\nservice docker restart \n\n#启动容器\ndocker ps -a\ndocker start 1764f695bb11\n\n#进入容器，并创建对应目录\ndocker exec -it 1764f695bb11 \u002Fbin\u002Fbash\n\n#从宿主机拷贝文件到容器\ndocker cp \u002Fdata\u002Fsoft\u002Fjdk-8u221-linux-x64.tar.gz fastdfs:\u002Fdata\u002Fsoft\u002F\n\n#从容器拷贝文件到宿主机\ndocker cp fastdfs:\u002Fdata\u002Fsoft\u002Fjdk-8u221-linux-x64.tar.gz \u002Fdata\u002Fsoft\u002F\n\n####################################### 这里开始走单机安装fastdfs\n\n####docker容器执行yum命令报错\nhttps:\u002F\u002Fblog.csdn.net\u002Fqq_44543508\u002Farticle\u002Fdetails\u002F103825500\n#容器里执行\nmv \u002Fetc\u002Fyum.repos.d\u002FCentOS-Base.repo \u002Fetc\u002Fyum.repos.d\u002FCentOS-Base.repo.backup\n#宿主机里执行\ndocker cp \u002Fetc\u002Fyum.repos.d\u002FCentOS-Base.repo fastdfs:\u002Fetc\u002Fyum.repos.d\n#容器里执行\nyum clean all\nyum makecache\nyum repolist\n```\n"},author_user_info:{user_id:"2726421782335303",user_name:"Aleyson爱逼逼",company:"顺网",job_title:"Java开发",avatar_large:"https:\u002F\u002Fsf3-ttcdn-tos.pstatp.com\u002Fimg\u002Fuser-avatar\u002Fef6936e3e35653416695d20515af72a1~300x300.image",level:h,description:"mysql、es",followee_count:4,follower_count:8,post_article_count:h,digg_article_count:19,got_digg_count:9,got_view_count:348,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:12,study_point:d,university:b,major:b,student_status:d,select_event_count:d,select_online_course_count:d,identity:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:h,ctime:1457483880,mtime:1432503193,show_type:3,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:void 0,subscribed:a,id:"6809641135154135054",tag_id:"6809641135154135054",tag_name:"分布式",color:e,icon:"https:\u002F\u002Fuser-gold-cdn.xitu.io\u002F1543069161467d7c255d31b971d1898bbaa4fd32f8945.jpg",back_ground:e,show_navi:d,tag_alias:e,post_article_count:1330,concern_user_count:6952,title:"分布式",tagId:"6809641135154135054",articleCount:1330,subscribersCount:6952,createdAt:b,updatedAt:b}],user_interact:{id:6894541668343775000,omitempty:2,user_id:d,is_digg:a,is_follow:a,is_collect:a},title:"一文教你认清FastDFS及生产环境的搭建",user:{id:"2726421782335303",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:h,user_id:"2726421782335303",user_name:"Aleyson爱逼逼",company:"顺网",job_title:"Java开发",avatar_large:"https:\u002F\u002Fsf3-ttcdn-tos.pstatp.com\u002Fimg\u002Fuser-avatar\u002Fef6936e3e35653416695d20515af72a1~300x300.image",description:"mysql、es",followee_count:4,follower_count:8,post_article_count:h,digg_article_count:19,got_digg_count:9,got_view_count:348,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:12,study_point:d,university:b,major:b,student_status:d,select_event_count:d,select_online_course_count:d,identity:d,juejinPower:12,jobTitle:"Java开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Aleyson爱逼逼",blogAddress:void 0,selfDescription:"mysql、es",beLikedCount:9,beReadCount:348,followerCount:8,followingCount:4,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:h,pinCount:d,likedArticleCount:19,likedPinCount:d,avatar:"https:\u002F\u002Fsf3-ttcdn-tos.pstatp.com\u002Fimg\u002Fuser-avatar\u002Fef6936e3e35653416695d20515af72a1~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:4,applyEventCount:d},viewCount:void 0,commentsCount:3,isEvent:void 0,abstract:"初期：“产品图片直接存在war包或者jar包里，用户图片存储在服务器的某个文件目录下。使用nginx代理获取和访问图片。 中期：伴随着业务的复杂度越来越高，用户量越来越大，但从文件存储这块来说，当前架构已经不像初期那样游刃有余；产品图片越来越多，war包或jar包越来越重，文件…",latestCommentAt:b,createdAt:new Date(1605260592000),updatedAt:b,isTopicEvent:a,likedCount:9,likeCount:9,content:e,originalUrl:e,type:"post",collected:a,viewsCount:348,username:"Aleyson爱逼逼",viewerHasLiked:a,draftId:"6894501065270984718",collectionCount:d},entryView:{},author:{id:"2726421782335303",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:h,user_id:"2726421782335303",user_name:"Aleyson爱逼逼",company:"顺网",job_title:"Java开发",avatar_large:"https:\u002F\u002Fsf3-ttcdn-tos.pstatp.com\u002Fimg\u002Fuser-avatar\u002Fef6936e3e35653416695d20515af72a1~300x300.image",description:"mysql、es",followee_count:4,follower_count:8,post_article_count:h,digg_article_count:19,got_digg_count:9,got_view_count:348,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:12,study_point:d,university:b,major:b,student_status:d,select_event_count:d,select_online_course_count:d,identity:d,juejinPower:12,jobTitle:"Java开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Aleyson爱逼逼",blogAddress:void 0,selfDescription:"mysql、es",beLikedCount:9,beReadCount:348,followerCount:8,followingCount:4,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:h,pinCount:d,likedArticleCount:19,likedPinCount:d,avatar:"https:\u002F\u002Fsf3-ttcdn-tos.pstatp.com\u002Fimg\u002Fuser-avatar\u002Fef6936e3e35653416695d20515af72a1~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:4,applyEventCount:d},adEntryList:[],relatedEntryList:[],actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],tagIds:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:o}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:c,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:b},subCommentList:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:b}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:r,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:k},pinlist:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:m},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:g,page:h,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:b}},followedList:{pageSize:r,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:c,category:j,categoryNavList:[]},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},auth:{user:b,clientId:e,token:e},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:b,errorView:b,statusCode:200},abTest:{info:{}},suspensionPanel:{needSuspension:c},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:b,isOnFocus:a},topic:{visible:a},route:{name:"column",path:p,hash:e,query:{},params:{id:q},fullPath:p,meta:{},from:{name:b,path:s,hash:e,query:{},params:{},fullPath:s,meta:{}}}},serverRendered:c,routePath:p,config:{API_HOST:"apinew.juejin.im",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:833,weibo:845,github:1032,wechatApp:1070}}}}(false,null,true,0,"","0",20,1,"topic","recommended","hot","following","popular","all","newest","\u002Fpost\u002F6894541668343775239","6894541668343775239",100,"\u002F"));</script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/runtime.f3142b8.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/layouts/default.0d655de.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/layouts.default.1c3d5fa.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/17.ec4a0fa.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/.d009df7.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/commons/app.3b100c6.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/vendors~app.204899d.js" defer></script><script src="//s3.pstatp.com/toutiao/xitu_juejin_web/app.88bad42.js" defer></script>
  </body>
</html>
